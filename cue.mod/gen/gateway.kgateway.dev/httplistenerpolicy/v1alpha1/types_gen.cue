// Code generated by timoni. DO NOT EDIT.

//timoni:generate timoni mod vendor crd -f https://github.com/kgateway-dev/kgateway/raw/refs/heads/main/install/helm/kgateway-crds/templates/gateway.kgateway.dev_httplistenerpolicies.yaml

package v1alpha1

import (
	"strings"
	"list"
	"struct"
)

#HTTPListenerPolicy: {
	apiVersion: "gateway.kgateway.dev/v1alpha1"
	kind:       "HTTPListenerPolicy"
	metadata!: {
		name!: strings.MaxRunes(253) & strings.MinRunes(1) & {
			string
		}
		namespace!: strings.MaxRunes(63) & strings.MinRunes(1) & {
			string
		}
		labels?: {
			[string]: string
		}
		annotations?: {
			[string]: string
		}
	}
	spec!: #HTTPListenerPolicySpec
}
#HTTPListenerPolicySpec: {
	acceptHttp10?: bool
	accessLog?: list.MaxItems(16) & [...{
		fileSink?: {
			jsonFormat?: {}
			path!:         string
			stringFormat?: string
		}
		filter?: matchN(2, [struct.MaxFields(1) & struct.MinFields(1), struct.MaxFields(1) & struct.MinFields(1)]) & {
			andFilter?: [...struct.MaxFields(1) & struct.MinFields(1) & {
				celFilter?: {
					match!: string
				}
				durationFilter?: {
					op!:    "EQ" | "GE" | "LE"
					value?: int32 & >=0
				}
				grpcStatusFilter?: {
					exclude?: bool
					statuses?: [..."OK" | "CANCELED" | "UNKNOWN" | "INVALID_ARGUMENT" | "DEADLINE_EXCEEDED" | "NOT_FOUND" | "ALREADY_EXISTS" | "PERMISSION_DENIED" | "RESOURCE_EXHAUSTED" | "FAILED_PRECONDITION" | "ABORTED" | "OUT_OF_RANGE" | "UNIMPLEMENTED" | "INTERNAL" | "UNAVAILABLE" | "DATA_LOSS" | "UNAUTHENTICATED"] & [_, ...]
				}
				headerFilter?: {
					header!: {
						name!: strings.MaxRunes(256) & strings.MinRunes(1) & {
							=~"^[A-Za-z0-9!#$%&'*+\\-.^_\\x60|~]+$"
						}
						type?:  "Exact" | "RegularExpression"
						value!: strings.MaxRunes(4096) & strings.MinRunes(1)
					}
				}
				notHealthCheckFilter?: bool
				responseFlagFilter?: {
					flags!: [...string] & [_, ...]
				}
				statusCodeFilter?: {
					op!:    "EQ" | "GE" | "LE"
					value?: int32 & >=0
				}
				traceableFilter?: bool
			}] & [_, _, ...]
			celFilter?: {
				match!: string
			}
			durationFilter?: {
				op!:    "EQ" | "GE" | "LE"
				value?: int32 & >=0
			}
			grpcStatusFilter?: {
				exclude?: bool
				statuses?: [..."OK" | "CANCELED" | "UNKNOWN" | "INVALID_ARGUMENT" | "DEADLINE_EXCEEDED" | "NOT_FOUND" | "ALREADY_EXISTS" | "PERMISSION_DENIED" | "RESOURCE_EXHAUSTED" | "FAILED_PRECONDITION" | "ABORTED" | "OUT_OF_RANGE" | "UNIMPLEMENTED" | "INTERNAL" | "UNAVAILABLE" | "DATA_LOSS" | "UNAUTHENTICATED"] & [_, ...]
			}
			headerFilter?: {
				header!: {
					name!: strings.MaxRunes(256) & strings.MinRunes(1) & {
						=~"^[A-Za-z0-9!#$%&'*+\\-.^_\\x60|~]+$"
					}
					type?:  "Exact" | "RegularExpression"
					value!: strings.MaxRunes(4096) & strings.MinRunes(1)
				}
			}
			notHealthCheckFilter?: bool
			orFilter?: [...struct.MaxFields(1) & struct.MinFields(1) & {
				celFilter?: {
					match!: string
				}
				durationFilter?: {
					op!:    "EQ" | "GE" | "LE"
					value?: int32 & >=0
				}
				grpcStatusFilter?: {
					exclude?: bool
					statuses?: [..."OK" | "CANCELED" | "UNKNOWN" | "INVALID_ARGUMENT" | "DEADLINE_EXCEEDED" | "NOT_FOUND" | "ALREADY_EXISTS" | "PERMISSION_DENIED" | "RESOURCE_EXHAUSTED" | "FAILED_PRECONDITION" | "ABORTED" | "OUT_OF_RANGE" | "UNIMPLEMENTED" | "INTERNAL" | "UNAVAILABLE" | "DATA_LOSS" | "UNAUTHENTICATED"] & [_, ...]
				}
				headerFilter?: {
					header!: {
						name!: strings.MaxRunes(256) & strings.MinRunes(1) & {
							=~"^[A-Za-z0-9!#$%&'*+\\-.^_\\x60|~]+$"
						}
						type?:  "Exact" | "RegularExpression"
						value!: strings.MaxRunes(4096) & strings.MinRunes(1)
					}
				}
				notHealthCheckFilter?: bool
				responseFlagFilter?: {
					flags!: [...string] & [_, ...]
				}
				statusCodeFilter?: {
					op!:    "EQ" | "GE" | "LE"
					value?: int32 & >=0
				}
				traceableFilter?: bool
			}] & [_, _, ...]
			responseFlagFilter?: {
				flags!: [...string] & [_, ...]
			}
			statusCodeFilter?: {
				op!:    "EQ" | "GE" | "LE"
				value?: int32 & >=0
			}
			traceableFilter?: bool
		}
		grpcService?: {
			additionalRequestHeadersToLog?: [...string]
			additionalResponseHeadersToLog?: [...string]
			additionalResponseTrailersToLog?: [...string]
			authority?: string
			backendRef!: {
				group?: strings.MaxRunes(253) & {
					=~"^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
				}
				kind?: strings.MaxRunes(63) & strings.MinRunes(1) & {
					=~"^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$"
				}
				name!: strings.MaxRunes(253) & strings.MinRunes(1)
				namespace?: strings.MaxRunes(63) & strings.MinRunes(1) & {
					=~"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
				}
				port?:   uint16 & >=1
				weight?: uint & <=1000000
			}
			initialMetadata?: [...{
				key!:   string
				value?: string
			}]
			logName!:                 string
			maxReceiveMessageLength?: int32
			retryPolicy?: {
				numRetries?: int32
				retryBackOff?: {
					baseInterval!: string
					maxInterval?:  string
				}
			}
			skipEnvoyHeaders?: bool
			timeout?:          string
		}
		openTelemetry?: {
			attributes?: {
				values?: [...{
					key!: string
					value!: struct.MinFields(1) & struct.MaxFields(1) & {
						arrayValue?: [...{}]
						kvListValue?: {}
						stringValue?: string
					}
				}]
			}
			body?:                 string
			disableBuiltinLabels?: bool
			grpcService!: {
				authority?: string
				backendRef!: {
					group?: strings.MaxRunes(253) & {
						=~"^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
					}
					kind?: strings.MaxRunes(63) & strings.MinRunes(1) & {
						=~"^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$"
					}
					name!: strings.MaxRunes(253) & strings.MinRunes(1)
					namespace?: strings.MaxRunes(63) & strings.MinRunes(1) & {
						=~"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
					}
					port?:   uint16 & >=1
					weight?: uint & <=1000000
				}
				initialMetadata?: [...{
					key!:   string
					value?: string
				}]
				logName!:                 string
				maxReceiveMessageLength?: int32
				retryPolicy?: {
					numRetries?: int32
					retryBackOff?: {
						baseInterval!: string
						maxInterval?:  string
					}
				}
				skipEnvoyHeaders?: bool
				timeout?:          string
			}
			resourceAttributes?: {
				values?: [...{
					key!: string
					value!: struct.MinFields(1) & struct.MaxFields(1) & {
						arrayValue?: [...{}]
						kvListValue?: {}
						stringValue?: string
					}
				}]
			}
		}
	}]
	defaultHostForHttp10?: strings.MinRunes(1)
	healthCheck?: {
		path!: strings.MaxRunes(2048) & {
			=~"^/[-a-zA-Z0-9@:%.+~#?&/=_]+$"
		}
	}
	idleTimeout?:                string
	preserveHttp1HeaderCase?:    bool
	serverHeaderTransformation?: "Overwrite" | "AppendIfAbsent" | "PassThrough"
	streamIdleTimeout?:          string
	targetRefs?: list.MaxItems(16) & [...{
		group!: strings.MaxRunes(253) & {
			=~"^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
		}
		kind!: strings.MaxRunes(63) & strings.MinRunes(1) & {
			=~"^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$"
		}
		name!: strings.MaxRunes(253) & strings.MinRunes(1)
	}] & [_, ...]
	targetSelectors?: [...{
		group!: strings.MaxRunes(253) & {
			=~"^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
		}
		kind!: strings.MaxRunes(63) & strings.MinRunes(1) & {
			=~"^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$"
		}
		matchLabels!: {
			[string]: string
		}
	}]
	tracing?: {
		attributes?: [...struct.MaxFields(2) & struct.MinFields(1) & {
			environment?: {
				defaultValue?: string
				name!:         string
			}
			literal?: {
				value!: string
			}
			metadata?: {
				defaultValue?: string
				kind!:         "Request" | "Route" | "Cluster" | "Host"
				metadataKey!: {
					key!: string
					path!: [...{
						key!: string
					}]
				}
			}
			name!: string
			requestHeader?: {
				defaultValue?: string
				name!:         string
			}
		}]
		clientSampling?:   uint & <=100
		maxPathTagLength?: int32
		overallSampling?:  uint & <=100
		provider!: struct.MinFields(1) & struct.MaxFields(1) & {
			openTelemetry?: {
				grpcService!: {
					authority?: string
					backendRef!: {
						group?: strings.MaxRunes(253) & {
							=~"^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
						}
						kind?: strings.MaxRunes(63) & strings.MinRunes(1) & {
							=~"^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$"
						}
						name!: strings.MaxRunes(253) & strings.MinRunes(1)
						namespace?: strings.MaxRunes(63) & strings.MinRunes(1) & {
							=~"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
						}
						port?:   uint16 & >=1
						weight?: uint & <=1000000
					}
					initialMetadata?: [...{
						key!:   string
						value?: string
					}]
					maxReceiveMessageLength?: int32
					retryPolicy?: {
						numRetries?: int32
						retryBackOff?: {
							baseInterval!: string
							maxInterval?:  string
						}
					}
					skipEnvoyHeaders?: bool
					timeout?:          string
				}
				resourceDetectors?: [...struct.MaxFields(1) & struct.MinFields(1) & {
					environmentResourceDetector?: {}
				}]
				sampler?: struct.MinFields(1) & struct.MaxFields(1) & {
					alwaysOnConfig?: {}
				}
				serviceName?: string
			}
		}
		randomSampling?:    uint & <=100
		spawnUpstreamSpan?: bool
		verbose?:           bool
	}
	upgradeConfig?: {
		enabledUpgrades?: [...string] & [_, ...]
	}
	useRemoteAddress?:  bool
	xffNumTrustedHops?: int32 & >=0
}
