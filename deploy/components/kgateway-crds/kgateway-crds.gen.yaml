apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
    gateway.networking.k8s.io/policy: Direct
  name: backendconfigpolicies.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: BackendConfigPolicy
    listKind: BackendConfigPolicyList
    plural: backendconfigpolicies
    singular: backendconfigpolicy
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              commonHttpProtocolOptions:
                properties:
                  idleTimeout:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                  maxHeadersCount:
                    type: integer
                  maxRequestsPerConnection:
                    type: integer
                  maxStreamDuration:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                type: object
              connectTimeout:
                type: string
                x-kubernetes-validations:
                - message: invalid duration value
                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
              healthCheck:
                properties:
                  grpc:
                    properties:
                      authority:
                        type: string
                      serviceName:
                        type: string
                    type: object
                  healthyThreshold:
                    format: int32
                    type: integer
                  http:
                    properties:
                      host:
                        type: string
                      method:
                        enum:
                        - GET
                        - HEAD
                        - POST
                        - PUT
                        - DELETE
                        - OPTIONS
                        - TRACE
                        - PATCH
                        type: string
                      path:
                        type: string
                    required:
                    - path
                    type: object
                  interval:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                  timeout:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                  unhealthyThreshold:
                    format: int32
                    type: integer
                required:
                - healthyThreshold
                - interval
                - timeout
                - unhealthyThreshold
                type: object
                x-kubernetes-validations:
                - message: exactly one of http or grpc must be set
                  rule: has(self.http) != has(self.grpc)
              http1ProtocolOptions:
                properties:
                  enableTrailers:
                    type: boolean
                  overrideStreamErrorOnInvalidHttpMessage:
                    type: boolean
                  preserveHttp1HeaderCase:
                    type: boolean
                type: object
              http2ProtocolOptions:
                properties:
                  initialConnectionWindowSize:
                    anyOf:
                    - type: integer
                    - type: string
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                    x-kubernetes-validations:
                    - message: InitialConnectionWindowSize must be between 65535 and
                        2147483647 bytes (inclusive)
                      rule: (type(self) == int && int(self) >= 65535 && int(self)
                        <= 2147483647) || (type(self) == string && quantity(self).isGreaterThan(quantity('65534'))
                        && quantity(self).isLessThan(quantity('2147483648')))
                  initialStreamWindowSize:
                    anyOf:
                    - type: integer
                    - type: string
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                    x-kubernetes-validations:
                    - message: InitialStreamWindowSize must be between 65535 and 2147483647
                        bytes (inclusive)
                      rule: (type(self) == int && int(self) >= 65535 && int(self)
                        <= 2147483647) || (type(self) == string && quantity(self).isGreaterThan(quantity('65534'))
                        && quantity(self).isLessThan(quantity('2147483648')))
                  maxConcurrentStreams:
                    type: integer
                  overrideStreamErrorOnInvalidHttpMessage:
                    type: boolean
                type: object
              loadBalancer:
                properties:
                  closeConnectionsOnHostSetChange:
                    type: boolean
                  healthyPanicThreshold:
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  leastRequest:
                    properties:
                      choiceCount:
                        default: 2
                        format: int32
                        type: integer
                      slowStart:
                        properties:
                          aggression:
                            type: string
                            x-kubernetes-validations:
                            - message: Aggression, if specified, must be a string
                                representing a number greater than 0.0
                              rule: (self.matches('^-?(?:[0-9]+(?:\\.[0-9]*)?|\\.[0-9]+)$')
                                && double(self) > 0.0)
                          minWeightPercent:
                            format: int32
                            type: integer
                          window:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        type: object
                    type: object
                  localityType:
                    enum:
                    - WeightedLb
                    type: string
                  maglev:
                    properties:
                      hashPolicies:
                        items:
                          properties:
                            cookie:
                              properties:
                                httpOnly:
                                  type: boolean
                                name:
                                  minLength: 1
                                  type: string
                                path:
                                  type: string
                                sameSite:
                                  enum:
                                  - Strict
                                  - Lax
                                  - None
                                  type: string
                                secure:
                                  type: boolean
                                ttl:
                                  type: string
                                  x-kubernetes-validations:
                                  - message: invalid duration value
                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                              required:
                              - name
                              type: object
                            header:
                              properties:
                                name:
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              type: object
                            sourceIP:
                              type: object
                            terminal:
                              type: boolean
                          type: object
                          x-kubernetes-validations:
                          - message: exactly one of the fields in [header cookie sourceIP]
                              must be set
                            rule: '[has(self.header),has(self.cookie),has(self.sourceIP)].filter(x,x==true).size()
                              == 1'
                        maxItems: 16
                        minItems: 1
                        type: array
                      useHostnameForHashing:
                        type: boolean
                    type: object
                  random:
                    type: object
                  ringHash:
                    properties:
                      hashPolicies:
                        items:
                          properties:
                            cookie:
                              properties:
                                httpOnly:
                                  type: boolean
                                name:
                                  minLength: 1
                                  type: string
                                path:
                                  type: string
                                sameSite:
                                  enum:
                                  - Strict
                                  - Lax
                                  - None
                                  type: string
                                secure:
                                  type: boolean
                                ttl:
                                  type: string
                                  x-kubernetes-validations:
                                  - message: invalid duration value
                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                              required:
                              - name
                              type: object
                            header:
                              properties:
                                name:
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              type: object
                            sourceIP:
                              type: object
                            terminal:
                              type: boolean
                          type: object
                          x-kubernetes-validations:
                          - message: exactly one of the fields in [header cookie sourceIP]
                              must be set
                            rule: '[has(self.header),has(self.cookie),has(self.sourceIP)].filter(x,x==true).size()
                              == 1'
                        maxItems: 16
                        minItems: 1
                        type: array
                      maximumRingSize:
                        format: int64
                        type: integer
                      minimumRingSize:
                        format: int64
                        type: integer
                      useHostnameForHashing:
                        type: boolean
                    type: object
                  roundRobin:
                    properties:
                      slowStart:
                        properties:
                          aggression:
                            type: string
                            x-kubernetes-validations:
                            - message: Aggression, if specified, must be a string
                                representing a number greater than 0.0
                              rule: (self.matches('^-?(?:[0-9]+(?:\\.[0-9]*)?|\\.[0-9]+)$')
                                && double(self) > 0.0)
                          minWeightPercent:
                            format: int32
                            type: integer
                          window:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        type: object
                    type: object
                  updateMergeWindow:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                type: object
                x-kubernetes-validations:
                - message: exactly one of the fields in [leastRequest roundRobin ringHash
                    maglev random] must be set
                  rule: '[has(self.leastRequest),has(self.roundRobin),has(self.ringHash),has(self.maglev),has(self.random)].filter(x,x==true).size()
                    == 1'
              outlierDetection:
                properties:
                  baseEjectionTime:
                    default: 30s
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                  consecutive5xx:
                    default: 5
                    format: int32
                    type: integer
                  interval:
                    default: 10s
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                  maxEjectionPercent:
                    default: 10
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                type: object
              perConnectionBufferLimitBytes:
                type: integer
              targetRefs:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-validations:
                - message: TargetRefs must reference either a Kubernetes Service or
                    a Backend API
                  rule: self.all(r, (r.group == '' && r.kind == 'Service') || (r.group
                    == 'gateway.kgateway.dev' && r.kind == 'Backend'))
              targetSelectors:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    matchLabels:
                      additionalProperties:
                        type: string
                      type: object
                  required:
                  - group
                  - kind
                  - matchLabels
                  type: object
                type: array
                x-kubernetes-validations:
                - message: TargetSelectors must reference either a Kubernetes Service
                    or a Backend API
                  rule: self.all(r, (r.group == '' && r.kind == 'Service') || (r.group
                    == 'gateway.kgateway.dev' && r.kind == 'Backend'))
              tcpKeepalive:
                properties:
                  keepAliveInterval:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                    - message: keepAliveInterval must be at least 1 second
                      rule: duration(self) >= duration('1s')
                  keepAliveProbes:
                    type: integer
                  keepAliveTime:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                    - message: keepAliveTime must be at least 1 second
                      rule: duration(self) >= duration('1s')
                type: object
              tls:
                properties:
                  allowRenegotiation:
                    type: boolean
                  alpnProtocols:
                    items:
                      type: string
                    type: array
                  insecureSkipVerify:
                    type: boolean
                  parameters:
                    properties:
                      cipherSuites:
                        items:
                          type: string
                        type: array
                      ecdhCurves:
                        items:
                          type: string
                        type: array
                      tlsMaxVersion:
                        enum:
                        - AUTO
                        - "1.0"
                        - "1.1"
                        - "1.2"
                        - "1.3"
                        type: string
                      tlsMinVersion:
                        enum:
                        - AUTO
                        - "1.0"
                        - "1.1"
                        - "1.2"
                        - "1.3"
                        type: string
                    type: object
                  secretRef:
                    properties:
                      name:
                        default: ""
                        type: string
                    type: object
                    x-kubernetes-map-type: atomic
                  simpleTLS:
                    type: boolean
                  sni:
                    minLength: 1
                    type: string
                  tlsFiles:
                    properties:
                      rootCA:
                        minLength: 1
                        type: string
                      tlsCertificate:
                        minLength: 1
                        type: string
                      tlsKey:
                        minLength: 1
                        type: string
                    type: object
                    x-kubernetes-validations:
                    - message: At least one of tlsCertificate, tlsKey, or rootCA must
                        be set in TLSFiles
                      rule: has(self.tlsCertificate) || has(self.tlsKey) || has(self.rootCA)
                  verifySubjectAltName:
                    items:
                      type: string
                    type: array
                  wellKnownCACertificates:
                    enum:
                    - System
                    type: string
                type: object
                x-kubernetes-validations:
                - message: exactly one of the fields in [secretRef tlsFiles insecureSkipVerify
                    wellKnownCACertificates] must be set
                  rule: '[has(self.secretRef),has(self.tlsFiles),has(self.insecureSkipVerify),has(self.wellKnownCACertificates)].filter(x,x==true).size()
                    == 1'
            type: object
            x-kubernetes-validations:
            - message: at most one of the fields in [http1ProtocolOptions http2ProtocolOptions]
                may be set
              rule: '[has(self.http1ProtocolOptions),has(self.http2ProtocolOptions)].filter(x,x==true).size()
                <= 1'
          status:
            properties:
              ancestors:
                items:
                  properties:
                    ancestorRef:
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      items:
                        properties:
                          lastTransitionTime:
                            format: date-time
                            type: string
                          message:
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - controllerName
                  type: object
                maxItems: 16
                type: array
            required:
            - ancestors
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
  name: backends.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: Backend
    listKind: BackendList
    plural: backends
    singular: backend
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Which backend type?
      jsonPath: .spec.type
      name: Type
      type: string
    - description: Backend configuration acceptance status
      jsonPath: .status.conditions[?(@.type=='Accepted')].status
      name: Accepted
      type: string
    - description: The age of the backend.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              ai:
                maxProperties: 1
                minProperties: 1
                properties:
                  llm:
                    properties:
                      authHeaderOverride:
                        properties:
                          headerName:
                            type: string
                          prefix:
                            type: string
                        type: object
                      hostOverride:
                        properties:
                          host:
                            minLength: 1
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        required:
                        - host
                        - port
                        type: object
                      pathOverride:
                        minProperties: 1
                        properties:
                          fullPath:
                            type: string
                        required:
                        - fullPath
                        type: object
                      provider:
                        maxProperties: 1
                        minProperties: 1
                        properties:
                          anthropic:
                            properties:
                              apiVersion:
                                type: string
                              authToken:
                                properties:
                                  inline:
                                    type: string
                                  kind:
                                    enum:
                                    - Inline
                                    - SecretRef
                                    - Passthrough
                                    type: string
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                    type: object
                                    x-kubernetes-map-type: atomic
                                required:
                                - kind
                                type: object
                                x-kubernetes-validations:
                                - message: at most one of the fields in [inline secretRef]
                                    may be set
                                  rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                    <= 1'
                              model:
                                type: string
                            required:
                            - authToken
                            type: object
                          azureopenai:
                            properties:
                              apiVersion:
                                minLength: 1
                                type: string
                              authToken:
                                properties:
                                  inline:
                                    type: string
                                  kind:
                                    enum:
                                    - Inline
                                    - SecretRef
                                    - Passthrough
                                    type: string
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                    type: object
                                    x-kubernetes-map-type: atomic
                                required:
                                - kind
                                type: object
                                x-kubernetes-validations:
                                - message: at most one of the fields in [inline secretRef]
                                    may be set
                                  rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                    <= 1'
                              deploymentName:
                                minLength: 1
                                type: string
                              endpoint:
                                minLength: 1
                                type: string
                            required:
                            - apiVersion
                            - authToken
                            - deploymentName
                            - endpoint
                            type: object
                          bedrock:
                            properties:
                              auth:
                                properties:
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                    type: object
                                    x-kubernetes-map-type: atomic
                                  type:
                                    enum:
                                    - Secret
                                    type: string
                                required:
                                - type
                                type: object
                                x-kubernetes-validations:
                                - message: secretRef must be nil if the type is not
                                    'Secret'
                                  rule: '!(has(self.secretRef) && self.type != ''Secret'')'
                                - message: secretRef must be specified when type is
                                    'Secret'
                                  rule: '!(!has(self.secretRef) && self.type == ''Secret'')'
                              guardrail:
                                properties:
                                  identifier:
                                    minLength: 1
                                    type: string
                                  version:
                                    minLength: 1
                                    type: string
                                required:
                                - identifier
                                - version
                                type: object
                              model:
                                minLength: 1
                                type: string
                              region:
                                default: us-east-1
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9-]+$
                                type: string
                            required:
                            - model
                            type: object
                          gemini:
                            properties:
                              apiVersion:
                                type: string
                              authToken:
                                properties:
                                  inline:
                                    type: string
                                  kind:
                                    enum:
                                    - Inline
                                    - SecretRef
                                    - Passthrough
                                    type: string
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                    type: object
                                    x-kubernetes-map-type: atomic
                                required:
                                - kind
                                type: object
                                x-kubernetes-validations:
                                - message: at most one of the fields in [inline secretRef]
                                    may be set
                                  rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                    <= 1'
                              model:
                                type: string
                            required:
                            - apiVersion
                            - authToken
                            - model
                            type: object
                          openai:
                            properties:
                              authToken:
                                properties:
                                  inline:
                                    type: string
                                  kind:
                                    enum:
                                    - Inline
                                    - SecretRef
                                    - Passthrough
                                    type: string
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                    type: object
                                    x-kubernetes-map-type: atomic
                                required:
                                - kind
                                type: object
                                x-kubernetes-validations:
                                - message: at most one of the fields in [inline secretRef]
                                    may be set
                                  rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                    <= 1'
                              model:
                                type: string
                            required:
                            - authToken
                            type: object
                          vertexai:
                            properties:
                              apiVersion:
                                minLength: 1
                                type: string
                              authToken:
                                properties:
                                  inline:
                                    type: string
                                  kind:
                                    enum:
                                    - Inline
                                    - SecretRef
                                    - Passthrough
                                    type: string
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                    type: object
                                    x-kubernetes-map-type: atomic
                                required:
                                - kind
                                type: object
                                x-kubernetes-validations:
                                - message: at most one of the fields in [inline secretRef]
                                    may be set
                                  rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                    <= 1'
                              location:
                                minLength: 1
                                type: string
                              model:
                                minLength: 1
                                type: string
                              modelPath:
                                type: string
                              projectId:
                                minLength: 1
                                type: string
                              publisher:
                                enum:
                                - GOOGLE
                                type: string
                            required:
                            - apiVersion
                            - authToken
                            - location
                            - model
                            - projectId
                            - publisher
                            type: object
                        type: object
                    required:
                    - provider
                    type: object
                  multipool:
                    properties:
                      priorities:
                        items:
                          properties:
                            pool:
                              items:
                                properties:
                                  authHeaderOverride:
                                    properties:
                                      headerName:
                                        type: string
                                      prefix:
                                        type: string
                                    type: object
                                  hostOverride:
                                    properties:
                                      host:
                                        minLength: 1
                                        type: string
                                      port:
                                        format: int32
                                        maximum: 65535
                                        minimum: 1
                                        type: integer
                                    required:
                                    - host
                                    - port
                                    type: object
                                  pathOverride:
                                    minProperties: 1
                                    properties:
                                      fullPath:
                                        type: string
                                    required:
                                    - fullPath
                                    type: object
                                  provider:
                                    maxProperties: 1
                                    minProperties: 1
                                    properties:
                                      anthropic:
                                        properties:
                                          apiVersion:
                                            type: string
                                          authToken:
                                            properties:
                                              inline:
                                                type: string
                                              kind:
                                                enum:
                                                - Inline
                                                - SecretRef
                                                - Passthrough
                                                type: string
                                              secretRef:
                                                properties:
                                                  name:
                                                    default: ""
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - kind
                                            type: object
                                            x-kubernetes-validations:
                                            - message: at most one of the fields in
                                                [inline secretRef] may be set
                                              rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                                <= 1'
                                          model:
                                            type: string
                                        required:
                                        - authToken
                                        type: object
                                      azureopenai:
                                        properties:
                                          apiVersion:
                                            minLength: 1
                                            type: string
                                          authToken:
                                            properties:
                                              inline:
                                                type: string
                                              kind:
                                                enum:
                                                - Inline
                                                - SecretRef
                                                - Passthrough
                                                type: string
                                              secretRef:
                                                properties:
                                                  name:
                                                    default: ""
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - kind
                                            type: object
                                            x-kubernetes-validations:
                                            - message: at most one of the fields in
                                                [inline secretRef] may be set
                                              rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                                <= 1'
                                          deploymentName:
                                            minLength: 1
                                            type: string
                                          endpoint:
                                            minLength: 1
                                            type: string
                                        required:
                                        - apiVersion
                                        - authToken
                                        - deploymentName
                                        - endpoint
                                        type: object
                                      bedrock:
                                        properties:
                                          auth:
                                            properties:
                                              secretRef:
                                                properties:
                                                  name:
                                                    default: ""
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              type:
                                                enum:
                                                - Secret
                                                type: string
                                            required:
                                            - type
                                            type: object
                                            x-kubernetes-validations:
                                            - message: secretRef must be nil if the
                                                type is not 'Secret'
                                              rule: '!(has(self.secretRef) && self.type
                                                != ''Secret'')'
                                            - message: secretRef must be specified
                                                when type is 'Secret'
                                              rule: '!(!has(self.secretRef) && self.type
                                                == ''Secret'')'
                                          guardrail:
                                            properties:
                                              identifier:
                                                minLength: 1
                                                type: string
                                              version:
                                                minLength: 1
                                                type: string
                                            required:
                                            - identifier
                                            - version
                                            type: object
                                          model:
                                            minLength: 1
                                            type: string
                                          region:
                                            default: us-east-1
                                            maxLength: 63
                                            minLength: 1
                                            pattern: ^[a-z0-9-]+$
                                            type: string
                                        required:
                                        - model
                                        type: object
                                      gemini:
                                        properties:
                                          apiVersion:
                                            type: string
                                          authToken:
                                            properties:
                                              inline:
                                                type: string
                                              kind:
                                                enum:
                                                - Inline
                                                - SecretRef
                                                - Passthrough
                                                type: string
                                              secretRef:
                                                properties:
                                                  name:
                                                    default: ""
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - kind
                                            type: object
                                            x-kubernetes-validations:
                                            - message: at most one of the fields in
                                                [inline secretRef] may be set
                                              rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                                <= 1'
                                          model:
                                            type: string
                                        required:
                                        - apiVersion
                                        - authToken
                                        - model
                                        type: object
                                      openai:
                                        properties:
                                          authToken:
                                            properties:
                                              inline:
                                                type: string
                                              kind:
                                                enum:
                                                - Inline
                                                - SecretRef
                                                - Passthrough
                                                type: string
                                              secretRef:
                                                properties:
                                                  name:
                                                    default: ""
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - kind
                                            type: object
                                            x-kubernetes-validations:
                                            - message: at most one of the fields in
                                                [inline secretRef] may be set
                                              rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                                <= 1'
                                          model:
                                            type: string
                                        required:
                                        - authToken
                                        type: object
                                      vertexai:
                                        properties:
                                          apiVersion:
                                            minLength: 1
                                            type: string
                                          authToken:
                                            properties:
                                              inline:
                                                type: string
                                              kind:
                                                enum:
                                                - Inline
                                                - SecretRef
                                                - Passthrough
                                                type: string
                                              secretRef:
                                                properties:
                                                  name:
                                                    default: ""
                                                    type: string
                                                type: object
                                                x-kubernetes-map-type: atomic
                                            required:
                                            - kind
                                            type: object
                                            x-kubernetes-validations:
                                            - message: at most one of the fields in
                                                [inline secretRef] may be set
                                              rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                                <= 1'
                                          location:
                                            minLength: 1
                                            type: string
                                          model:
                                            minLength: 1
                                            type: string
                                          modelPath:
                                            type: string
                                          projectId:
                                            minLength: 1
                                            type: string
                                          publisher:
                                            enum:
                                            - GOOGLE
                                            type: string
                                        required:
                                        - apiVersion
                                        - authToken
                                        - location
                                        - model
                                        - projectId
                                        - publisher
                                        type: object
                                    type: object
                                required:
                                - provider
                                type: object
                              maxItems: 20
                              minItems: 1
                              type: array
                          type: object
                        maxItems: 20
                        minItems: 1
                        type: array
                    required:
                    - priorities
                    type: object
                type: object
                x-kubernetes-validations:
                - message: There must one and only one LLM or MultiPool can be set
                  rule: (has(self.llm) && !has(self.multipool)) || (!has(self.llm)
                    && has(self.multipool))
              aws:
                properties:
                  accountId:
                    maxLength: 12
                    minLength: 1
                    pattern: ^[0-9]{12}$
                    type: string
                  auth:
                    properties:
                      secretRef:
                        properties:
                          name:
                            default: ""
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      type:
                        enum:
                        - Secret
                        type: string
                    required:
                    - type
                    type: object
                    x-kubernetes-validations:
                    - message: secretRef must be nil if the type is not 'Secret'
                      rule: '!(has(self.secretRef) && self.type != ''Secret'')'
                    - message: secretRef must be specified when type is 'Secret'
                      rule: '!(!has(self.secretRef) && self.type == ''Secret'')'
                  lambda:
                    properties:
                      endpointURL:
                        maxLength: 2048
                        pattern: ^https?://[-a-zA-Z0-9@:%.+~#?&/=]+$
                        type: string
                      functionName:
                        pattern: ^[A-Za-z0-9-_]{1,140}$
                        type: string
                      invocationMode:
                        default: Sync
                        enum:
                        - Sync
                        - Async
                        type: string
                      payloadTransformMode:
                        default: Envoy
                        enum:
                        - None
                        - Envoy
                        type: string
                      qualifier:
                        default: $LATEST
                        pattern: ^(\$LATEST|[0-9]+|[A-Za-z0-9-_]{1,128})$
                        type: string
                    required:
                    - functionName
                    type: object
                  region:
                    default: us-east-1
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9-]+$
                    type: string
                required:
                - accountId
                - lambda
                type: object
              dynamicForwardProxy:
                properties:
                  enableTls:
                    type: boolean
                type: object
              mcp:
                properties:
                  targets:
                    items:
                      properties:
                        name:
                          type: string
                        selector:
                          properties:
                            namespace:
                              properties:
                                matchExpressions:
                                  items:
                                    properties:
                                      key:
                                        type: string
                                      operator:
                                        type: string
                                      values:
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            service:
                              properties:
                                matchExpressions:
                                  items:
                                    properties:
                                      key:
                                        type: string
                                      operator:
                                        type: string
                                      values:
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                          type: object
                          x-kubernetes-validations:
                          - message: at least one of namespace or service must be
                              set
                            rule: has(self.__namespace__) || has(self.service)
                        static:
                          properties:
                            host:
                              minLength: 1
                              type: string
                            path:
                              type: string
                            port:
                              format: int32
                              maximum: 65535
                              minimum: 1
                              type: integer
                            protocol:
                              enum:
                              - StreamableHTTP
                              - SSE
                              type: string
                          required:
                          - host
                          - port
                          type: object
                      required:
                      - name
                      type: object
                      x-kubernetes-validations:
                      - message: exactly one of the fields in [selector static] must
                          be set
                        rule: '[has(self.selector),has(self.static)].filter(x,x==true).size()
                          == 1'
                    maxItems: 32
                    minItems: 1
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                required:
                - targets
                type: object
              static:
                properties:
                  appProtocol:
                    enum:
                    - http2
                    - grpc
                    - grpc-web
                    - kubernetes.io/h2c
                    - kubernetes.io/ws
                    type: string
                  hosts:
                    items:
                      properties:
                        host:
                          minLength: 1
                          type: string
                        port:
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                      required:
                      - host
                      - port
                      type: object
                    minItems: 1
                    type: array
                required:
                - hosts
                type: object
              type:
                enum:
                - AI
                - AWS
                - Static
                - DynamicForwardProxy
                - MCP
                type: string
            required:
            - type
            type: object
            x-kubernetes-validations:
            - message: ai backend must be specified when type is 'AI'
              rule: 'self.type == ''AI'' ? has(self.ai) : true'
            - message: aws backend must be specified when type is 'AWS'
              rule: 'self.type == ''AWS'' ? has(self.aws) : true'
            - message: static backend must be specified when type is 'Static'
              rule: 'self.type == ''Static'' ? has(self.static) : true'
            - message: dynamicForwardProxy backend must be specified when type is
                'DynamicForwardProxy'
              rule: 'self.type == ''DynamicForwardProxy'' ? has(self.dynamicForwardProxy)
                : true'
            - message: mcp backend must be specified when type is 'MCP'
              rule: 'self.type == ''MCP'' ? has(self.mcp) : true'
            - message: exactly one of the fields in [ai aws static dynamicForwardProxy
                mcp] must be set
              rule: '[has(self.ai),has(self.aws),has(self.static),has(self.dynamicForwardProxy),has(self.mcp)].filter(x,x==true).size()
                == 1'
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
  name: directresponses.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: DirectResponse
    listKind: DirectResponseList
    plural: directresponses
    singular: directresponse
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              body:
                maxLength: 4096
                minLength: 1
                type: string
              status:
                format: int32
                maximum: 599
                minimum: 200
                type: integer
            required:
            - status
            type: object
          status:
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
  name: gatewayextensions.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: GatewayExtension
    listKind: GatewayExtensionList
    plural: gatewayextensions
    singular: gatewayextension
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Which extension type?
      jsonPath: .spec.type
      name: Type
      type: string
    - description: The age of the gatewayextension.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              extAuth:
                properties:
                  grpcService:
                    properties:
                      authority:
                        type: string
                      backendRef:
                        properties:
                          group:
                            default: ""
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                    required:
                    - backendRef
                    type: object
                required:
                - grpcService
                type: object
              extProc:
                properties:
                  grpcService:
                    properties:
                      authority:
                        type: string
                      backendRef:
                        properties:
                          group:
                            default: ""
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                    required:
                    - backendRef
                    type: object
                required:
                - grpcService
                type: object
              rateLimit:
                properties:
                  domain:
                    type: string
                  failOpen:
                    default: true
                    type: boolean
                  grpcService:
                    properties:
                      authority:
                        type: string
                      backendRef:
                        properties:
                          group:
                            default: ""
                            maxLength: 253
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Service
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          port:
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                          weight:
                            default: 1
                            format: int32
                            maximum: 1000000
                            minimum: 0
                            type: integer
                        required:
                        - name
                        type: object
                        x-kubernetes-validations:
                        - message: Must have port for Service reference
                          rule: '(size(self.group) == 0 && self.kind == ''Service'')
                            ? has(self.port) : true'
                    required:
                    - backendRef
                    type: object
                  timeout:
                    default: 100ms
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                required:
                - domain
                - grpcService
                type: object
              type:
                enum:
                - ExtAuth
                - ExtProc
                - RateLimit
                type: string
            required:
            - type
            type: object
            x-kubernetes-validations:
            - message: ExtAuth must be set when type is ExtAuth
              rule: self.type != 'ExtAuth' || has(self.extAuth)
            - message: ExtProc must be set when type is ExtProc
              rule: self.type != 'ExtProc' || has(self.extProc)
            - message: RateLimit must be set when type is RateLimit
              rule: self.type != 'RateLimit' || has(self.rateLimit)
            - message: ExtAuth must not be set when type is not ExtAuth
              rule: self.type == 'ExtAuth' || !has(self.extAuth)
            - message: ExtProc must not be set when type is not ExtProc
              rule: self.type == 'ExtProc' || !has(self.extProc)
            - message: RateLimit must not be set when type is not RateLimit
              rule: self.type == 'RateLimit' || !has(self.rateLimit)
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                maxItems: 8
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
  name: gatewayparameters.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: GatewayParameters
    listKind: GatewayParametersList
    plural: gatewayparameters
    singular: gatewayparameters
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              kube:
                properties:
                  agentGateway:
                    properties:
                      customConfigMapName:
                        type: string
                      enabled:
                        type: boolean
                      env:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ""
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fieldRef:
                                  properties:
                                    apiVersion:
                                      type: string
                                    fieldPath:
                                      type: string
                                  required:
                                  - fieldPath
                                  type: object
                                  x-kubernetes-map-type: atomic
                                resourceFieldRef:
                                  properties:
                                    containerName:
                                      type: string
                                    divisor:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    resource:
                                      type: string
                                  required:
                                  - resource
                                  type: object
                                  x-kubernetes-map-type: atomic
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ""
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      logLevel:
                        type: string
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      securityContext:
                        properties:
                          allowPrivilegeEscalation:
                            type: boolean
                          appArmorProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          capabilities:
                            properties:
                              add:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                              drop:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          privileged:
                            type: boolean
                          procMount:
                            type: string
                          readOnlyRootFilesystem:
                            type: boolean
                          runAsGroup:
                            format: int64
                            type: integer
                          runAsNonRoot:
                            type: boolean
                          runAsUser:
                            format: int64
                            type: integer
                          seLinuxOptions:
                            properties:
                              level:
                                type: string
                              role:
                                type: string
                              type:
                                type: string
                              user:
                                type: string
                            type: object
                          seccompProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          windowsOptions:
                            properties:
                              gmsaCredentialSpec:
                                type: string
                              gmsaCredentialSpecName:
                                type: string
                              hostProcess:
                                type: boolean
                              runAsUserName:
                                type: string
                            type: object
                        type: object
                    type: object
                  aiExtension:
                    properties:
                      enabled:
                        type: boolean
                      env:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ""
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fieldRef:
                                  properties:
                                    apiVersion:
                                      type: string
                                    fieldPath:
                                      type: string
                                  required:
                                  - fieldPath
                                  type: object
                                  x-kubernetes-map-type: atomic
                                resourceFieldRef:
                                  properties:
                                    containerName:
                                      type: string
                                    divisor:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    resource:
                                      type: string
                                  required:
                                  - resource
                                  type: object
                                  x-kubernetes-map-type: atomic
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ""
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      ports:
                        items:
                          properties:
                            containerPort:
                              format: int32
                              type: integer
                            hostIP:
                              type: string
                            hostPort:
                              format: int32
                              type: integer
                            name:
                              type: string
                            protocol:
                              default: TCP
                              type: string
                          required:
                          - containerPort
                          type: object
                        type: array
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      securityContext:
                        properties:
                          allowPrivilegeEscalation:
                            type: boolean
                          appArmorProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          capabilities:
                            properties:
                              add:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                              drop:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          privileged:
                            type: boolean
                          procMount:
                            type: string
                          readOnlyRootFilesystem:
                            type: boolean
                          runAsGroup:
                            format: int64
                            type: integer
                          runAsNonRoot:
                            type: boolean
                          runAsUser:
                            format: int64
                            type: integer
                          seLinuxOptions:
                            properties:
                              level:
                                type: string
                              role:
                                type: string
                              type:
                                type: string
                              user:
                                type: string
                            type: object
                          seccompProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          windowsOptions:
                            properties:
                              gmsaCredentialSpec:
                                type: string
                              gmsaCredentialSpecName:
                                type: string
                              hostProcess:
                                type: boolean
                              runAsUserName:
                                type: string
                            type: object
                        type: object
                      stats:
                        properties:
                          customLabels:
                            items:
                              properties:
                                keyDelimiter:
                                  type: string
                                metadataKey:
                                  minLength: 1
                                  type: string
                                metadataNamespace:
                                  enum:
                                  - envoy.filters.http.jwt_authn
                                  - io.solo.transformation
                                  type: string
                                name:
                                  minLength: 1
                                  type: string
                              required:
                              - metadataKey
                              - name
                              type: object
                            type: array
                        type: object
                      tracing:
                        properties:
                          endpoint:
                            maxLength: 253
                            minLength: 1
                            pattern: ^(([^:/?#]+):)(//([^/?#]*))([^?#]*)(\?([^#]*))?(#(.*))?
                            type: string
                          protocol:
                            enum:
                            - grpc
                            - http/protobuf
                            - http/json
                            type: string
                          sampler:
                            properties:
                              arg:
                                pattern: ^0(\.\d+)?|1(\.0+)?$
                                type: string
                              type:
                                enum:
                                - alwaysOn
                                - alwaysOff
                                - traceidratio
                                - parentbasedAlwaysOn
                                - parentbasedAlwaysOff
                                - parentbasedTraceidratio
                                type: string
                            type: object
                          timeout:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                        required:
                        - endpoint
                        type: object
                    type: object
                  deployment:
                    properties:
                      omitReplicas:
                        type: boolean
                      replicas:
                        format: int32
                        type: integer
                    type: object
                    x-kubernetes-validations:
                    - message: at most one of the fields in [replicas omitReplicas]
                        may be set
                      rule: '[has(self.replicas),has(self.omitReplicas)].filter(x,x==true).size()
                        <= 1'
                  envoyContainer:
                    properties:
                      bootstrap:
                        properties:
                          componentLogLevels:
                            additionalProperties:
                              type: string
                            type: object
                          logLevel:
                            type: string
                        type: object
                      env:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                            valueFrom:
                              properties:
                                configMapKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ""
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                                fieldRef:
                                  properties:
                                    apiVersion:
                                      type: string
                                    fieldPath:
                                      type: string
                                  required:
                                  - fieldPath
                                  type: object
                                  x-kubernetes-map-type: atomic
                                resourceFieldRef:
                                  properties:
                                    containerName:
                                      type: string
                                    divisor:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    resource:
                                      type: string
                                  required:
                                  - resource
                                  type: object
                                  x-kubernetes-map-type: atomic
                                secretKeyRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      default: ""
                                      type: string
                                    optional:
                                      type: boolean
                                  required:
                                  - key
                                  type: object
                                  x-kubernetes-map-type: atomic
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      securityContext:
                        properties:
                          allowPrivilegeEscalation:
                            type: boolean
                          appArmorProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          capabilities:
                            properties:
                              add:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                              drop:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          privileged:
                            type: boolean
                          procMount:
                            type: string
                          readOnlyRootFilesystem:
                            type: boolean
                          runAsGroup:
                            format: int64
                            type: integer
                          runAsNonRoot:
                            type: boolean
                          runAsUser:
                            format: int64
                            type: integer
                          seLinuxOptions:
                            properties:
                              level:
                                type: string
                              role:
                                type: string
                              type:
                                type: string
                              user:
                                type: string
                            type: object
                          seccompProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          windowsOptions:
                            properties:
                              gmsaCredentialSpec:
                                type: string
                              gmsaCredentialSpecName:
                                type: string
                              hostProcess:
                                type: boolean
                              runAsUserName:
                                type: string
                            type: object
                        type: object
                    type: object
                  floatingUserId:
                    type: boolean
                  istio:
                    properties:
                      customSidecars:
                        items:
                          properties:
                            args:
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            command:
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            env:
                              items:
                                properties:
                                  name:
                                    type: string
                                  value:
                                    type: string
                                  valueFrom:
                                    properties:
                                      configMapKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            default: ""
                                            type: string
                                          optional:
                                            type: boolean
                                        required:
                                        - key
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      fieldRef:
                                        properties:
                                          apiVersion:
                                            type: string
                                          fieldPath:
                                            type: string
                                        required:
                                        - fieldPath
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      resourceFieldRef:
                                        properties:
                                          containerName:
                                            type: string
                                          divisor:
                                            anyOf:
                                            - type: integer
                                            - type: string
                                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                            x-kubernetes-int-or-string: true
                                          resource:
                                            type: string
                                        required:
                                        - resource
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      secretKeyRef:
                                        properties:
                                          key:
                                            type: string
                                          name:
                                            default: ""
                                            type: string
                                          optional:
                                            type: boolean
                                        required:
                                        - key
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    type: object
                                required:
                                - name
                                type: object
                              type: array
                              x-kubernetes-list-map-keys:
                              - name
                              x-kubernetes-list-type: map
                            envFrom:
                              items:
                                properties:
                                  configMapRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                      optional:
                                        type: boolean
                                    type: object
                                    x-kubernetes-map-type: atomic
                                  prefix:
                                    type: string
                                  secretRef:
                                    properties:
                                      name:
                                        default: ""
                                        type: string
                                      optional:
                                        type: boolean
                                    type: object
                                    x-kubernetes-map-type: atomic
                                type: object
                              type: array
                              x-kubernetes-list-type: atomic
                            image:
                              type: string
                            imagePullPolicy:
                              type: string
                            lifecycle:
                              properties:
                                postStart:
                                  properties:
                                    exec:
                                      properties:
                                        command:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      type: object
                                    httpGet:
                                      properties:
                                        host:
                                          type: string
                                        httpHeaders:
                                          items:
                                            properties:
                                              name:
                                                type: string
                                              value:
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        path:
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    sleep:
                                      properties:
                                        seconds:
                                          format: int64
                                          type: integer
                                      required:
                                      - seconds
                                      type: object
                                    tcpSocket:
                                      properties:
                                        host:
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                  type: object
                                preStop:
                                  properties:
                                    exec:
                                      properties:
                                        command:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      type: object
                                    httpGet:
                                      properties:
                                        host:
                                          type: string
                                        httpHeaders:
                                          items:
                                            properties:
                                              name:
                                                type: string
                                              value:
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        path:
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    sleep:
                                      properties:
                                        seconds:
                                          format: int64
                                          type: integer
                                      required:
                                      - seconds
                                      type: object
                                    tcpSocket:
                                      properties:
                                        host:
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                  type: object
                                stopSignal:
                                  type: string
                              type: object
                            livenessProbe:
                              properties:
                                exec:
                                  properties:
                                    command:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  type: object
                                failureThreshold:
                                  format: int32
                                  type: integer
                                grpc:
                                  properties:
                                    port:
                                      format: int32
                                      type: integer
                                    service:
                                      default: ""
                                      type: string
                                  required:
                                  - port
                                  type: object
                                httpGet:
                                  properties:
                                    host:
                                      type: string
                                    httpHeaders:
                                      items:
                                        properties:
                                          name:
                                            type: string
                                          value:
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    path:
                                      type: string
                                    port:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                    scheme:
                                      type: string
                                  required:
                                  - port
                                  type: object
                                initialDelaySeconds:
                                  format: int32
                                  type: integer
                                periodSeconds:
                                  format: int32
                                  type: integer
                                successThreshold:
                                  format: int32
                                  type: integer
                                tcpSocket:
                                  properties:
                                    host:
                                      type: string
                                    port:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - port
                                  type: object
                                terminationGracePeriodSeconds:
                                  format: int64
                                  type: integer
                                timeoutSeconds:
                                  format: int32
                                  type: integer
                              type: object
                            name:
                              type: string
                            ports:
                              items:
                                properties:
                                  containerPort:
                                    format: int32
                                    type: integer
                                  hostIP:
                                    type: string
                                  hostPort:
                                    format: int32
                                    type: integer
                                  name:
                                    type: string
                                  protocol:
                                    default: TCP
                                    type: string
                                required:
                                - containerPort
                                type: object
                              type: array
                              x-kubernetes-list-map-keys:
                              - containerPort
                              - protocol
                              x-kubernetes-list-type: map
                            readinessProbe:
                              properties:
                                exec:
                                  properties:
                                    command:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  type: object
                                failureThreshold:
                                  format: int32
                                  type: integer
                                grpc:
                                  properties:
                                    port:
                                      format: int32
                                      type: integer
                                    service:
                                      default: ""
                                      type: string
                                  required:
                                  - port
                                  type: object
                                httpGet:
                                  properties:
                                    host:
                                      type: string
                                    httpHeaders:
                                      items:
                                        properties:
                                          name:
                                            type: string
                                          value:
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    path:
                                      type: string
                                    port:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                    scheme:
                                      type: string
                                  required:
                                  - port
                                  type: object
                                initialDelaySeconds:
                                  format: int32
                                  type: integer
                                periodSeconds:
                                  format: int32
                                  type: integer
                                successThreshold:
                                  format: int32
                                  type: integer
                                tcpSocket:
                                  properties:
                                    host:
                                      type: string
                                    port:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - port
                                  type: object
                                terminationGracePeriodSeconds:
                                  format: int64
                                  type: integer
                                timeoutSeconds:
                                  format: int32
                                  type: integer
                              type: object
                            resizePolicy:
                              items:
                                properties:
                                  resourceName:
                                    type: string
                                  restartPolicy:
                                    type: string
                                required:
                                - resourceName
                                - restartPolicy
                                type: object
                              type: array
                              x-kubernetes-list-type: atomic
                            resources:
                              properties:
                                claims:
                                  items:
                                    properties:
                                      name:
                                        type: string
                                      request:
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  type: array
                                  x-kubernetes-list-map-keys:
                                  - name
                                  x-kubernetes-list-type: map
                                limits:
                                  additionalProperties:
                                    anyOf:
                                    - type: integer
                                    - type: string
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  type: object
                                requests:
                                  additionalProperties:
                                    anyOf:
                                    - type: integer
                                    - type: string
                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                    x-kubernetes-int-or-string: true
                                  type: object
                              type: object
                            restartPolicy:
                              type: string
                            securityContext:
                              properties:
                                allowPrivilegeEscalation:
                                  type: boolean
                                appArmorProfile:
                                  properties:
                                    localhostProfile:
                                      type: string
                                    type:
                                      type: string
                                  required:
                                  - type
                                  type: object
                                capabilities:
                                  properties:
                                    add:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    drop:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  type: object
                                privileged:
                                  type: boolean
                                procMount:
                                  type: string
                                readOnlyRootFilesystem:
                                  type: boolean
                                runAsGroup:
                                  format: int64
                                  type: integer
                                runAsNonRoot:
                                  type: boolean
                                runAsUser:
                                  format: int64
                                  type: integer
                                seLinuxOptions:
                                  properties:
                                    level:
                                      type: string
                                    role:
                                      type: string
                                    type:
                                      type: string
                                    user:
                                      type: string
                                  type: object
                                seccompProfile:
                                  properties:
                                    localhostProfile:
                                      type: string
                                    type:
                                      type: string
                                  required:
                                  - type
                                  type: object
                                windowsOptions:
                                  properties:
                                    gmsaCredentialSpec:
                                      type: string
                                    gmsaCredentialSpecName:
                                      type: string
                                    hostProcess:
                                      type: boolean
                                    runAsUserName:
                                      type: string
                                  type: object
                              type: object
                            startupProbe:
                              properties:
                                exec:
                                  properties:
                                    command:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                  type: object
                                failureThreshold:
                                  format: int32
                                  type: integer
                                grpc:
                                  properties:
                                    port:
                                      format: int32
                                      type: integer
                                    service:
                                      default: ""
                                      type: string
                                  required:
                                  - port
                                  type: object
                                httpGet:
                                  properties:
                                    host:
                                      type: string
                                    httpHeaders:
                                      items:
                                        properties:
                                          name:
                                            type: string
                                          value:
                                            type: string
                                        required:
                                        - name
                                        - value
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    path:
                                      type: string
                                    port:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                    scheme:
                                      type: string
                                  required:
                                  - port
                                  type: object
                                initialDelaySeconds:
                                  format: int32
                                  type: integer
                                periodSeconds:
                                  format: int32
                                  type: integer
                                successThreshold:
                                  format: int32
                                  type: integer
                                tcpSocket:
                                  properties:
                                    host:
                                      type: string
                                    port:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - port
                                  type: object
                                terminationGracePeriodSeconds:
                                  format: int64
                                  type: integer
                                timeoutSeconds:
                                  format: int32
                                  type: integer
                              type: object
                            stdin:
                              type: boolean
                            stdinOnce:
                              type: boolean
                            terminationMessagePath:
                              type: string
                            terminationMessagePolicy:
                              type: string
                            tty:
                              type: boolean
                            volumeDevices:
                              items:
                                properties:
                                  devicePath:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - devicePath
                                - name
                                type: object
                              type: array
                              x-kubernetes-list-map-keys:
                              - devicePath
                              x-kubernetes-list-type: map
                            volumeMounts:
                              items:
                                properties:
                                  mountPath:
                                    type: string
                                  mountPropagation:
                                    type: string
                                  name:
                                    type: string
                                  readOnly:
                                    type: boolean
                                  recursiveReadOnly:
                                    type: string
                                  subPath:
                                    type: string
                                  subPathExpr:
                                    type: string
                                required:
                                - mountPath
                                - name
                                type: object
                              type: array
                              x-kubernetes-list-map-keys:
                              - mountPath
                              x-kubernetes-list-type: map
                            workingDir:
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      istioProxyContainer:
                        properties:
                          image:
                            properties:
                              digest:
                                type: string
                              pullPolicy:
                                type: string
                              registry:
                                type: string
                              repository:
                                type: string
                              tag:
                                type: string
                            type: object
                          istioDiscoveryAddress:
                            type: string
                          istioMetaClusterId:
                            type: string
                          istioMetaMeshId:
                            type: string
                          logLevel:
                            type: string
                          resources:
                            properties:
                              claims:
                                items:
                                  properties:
                                    name:
                                      type: string
                                    request:
                                      type: string
                                  required:
                                  - name
                                  type: object
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              limits:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type: object
                              requests:
                                additionalProperties:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type: object
                            type: object
                          securityContext:
                            properties:
                              allowPrivilegeEscalation:
                                type: boolean
                              appArmorProfile:
                                properties:
                                  localhostProfile:
                                    type: string
                                  type:
                                    type: string
                                required:
                                - type
                                type: object
                              capabilities:
                                properties:
                                  add:
                                    items:
                                      type: string
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  drop:
                                    items:
                                      type: string
                                    type: array
                                    x-kubernetes-list-type: atomic
                                type: object
                              privileged:
                                type: boolean
                              procMount:
                                type: string
                              readOnlyRootFilesystem:
                                type: boolean
                              runAsGroup:
                                format: int64
                                type: integer
                              runAsNonRoot:
                                type: boolean
                              runAsUser:
                                format: int64
                                type: integer
                              seLinuxOptions:
                                properties:
                                  level:
                                    type: string
                                  role:
                                    type: string
                                  type:
                                    type: string
                                  user:
                                    type: string
                                type: object
                              seccompProfile:
                                properties:
                                  localhostProfile:
                                    type: string
                                  type:
                                    type: string
                                required:
                                - type
                                type: object
                              windowsOptions:
                                properties:
                                  gmsaCredentialSpec:
                                    type: string
                                  gmsaCredentialSpecName:
                                    type: string
                                  hostProcess:
                                    type: boolean
                                  runAsUserName:
                                    type: string
                                type: object
                            type: object
                        type: object
                    type: object
                  podTemplate:
                    properties:
                      affinity:
                        properties:
                          nodeAffinity:
                            properties:
                              preferredDuringSchedulingIgnoredDuringExecution:
                                items:
                                  properties:
                                    preference:
                                      properties:
                                        matchExpressions:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchFields:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    weight:
                                      format: int32
                                      type: integer
                                  required:
                                  - preference
                                  - weight
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              requiredDuringSchedulingIgnoredDuringExecution:
                                properties:
                                  nodeSelectorTerms:
                                    items:
                                      properties:
                                        matchExpressions:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchFields:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    type: array
                                    x-kubernetes-list-type: atomic
                                required:
                                - nodeSelectorTerms
                                type: object
                                x-kubernetes-map-type: atomic
                            type: object
                          podAffinity:
                            properties:
                              preferredDuringSchedulingIgnoredDuringExecution:
                                items:
                                  properties:
                                    podAffinityTerm:
                                      properties:
                                        labelSelector:
                                          properties:
                                            matchExpressions:
                                              items:
                                                properties:
                                                  key:
                                                    type: string
                                                  operator:
                                                    type: string
                                                  values:
                                                    items:
                                                      type: string
                                                    type: array
                                                    x-kubernetes-list-type: atomic
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        matchLabelKeys:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        mismatchLabelKeys:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        namespaceSelector:
                                          properties:
                                            matchExpressions:
                                              items:
                                                properties:
                                                  key:
                                                    type: string
                                                  operator:
                                                    type: string
                                                  values:
                                                    items:
                                                      type: string
                                                    type: array
                                                    x-kubernetes-list-type: atomic
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        namespaces:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        topologyKey:
                                          type: string
                                      required:
                                      - topologyKey
                                      type: object
                                    weight:
                                      format: int32
                                      type: integer
                                  required:
                                  - podAffinityTerm
                                  - weight
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              requiredDuringSchedulingIgnoredDuringExecution:
                                items:
                                  properties:
                                    labelSelector:
                                      properties:
                                        matchExpressions:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    matchLabelKeys:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    mismatchLabelKeys:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    namespaceSelector:
                                      properties:
                                        matchExpressions:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    namespaces:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    topologyKey:
                                      type: string
                                  required:
                                  - topologyKey
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          podAntiAffinity:
                            properties:
                              preferredDuringSchedulingIgnoredDuringExecution:
                                items:
                                  properties:
                                    podAffinityTerm:
                                      properties:
                                        labelSelector:
                                          properties:
                                            matchExpressions:
                                              items:
                                                properties:
                                                  key:
                                                    type: string
                                                  operator:
                                                    type: string
                                                  values:
                                                    items:
                                                      type: string
                                                    type: array
                                                    x-kubernetes-list-type: atomic
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        matchLabelKeys:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        mismatchLabelKeys:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        namespaceSelector:
                                          properties:
                                            matchExpressions:
                                              items:
                                                properties:
                                                  key:
                                                    type: string
                                                  operator:
                                                    type: string
                                                  values:
                                                    items:
                                                      type: string
                                                    type: array
                                                    x-kubernetes-list-type: atomic
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        namespaces:
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        topologyKey:
                                          type: string
                                      required:
                                      - topologyKey
                                      type: object
                                    weight:
                                      format: int32
                                      type: integer
                                  required:
                                  - podAffinityTerm
                                  - weight
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              requiredDuringSchedulingIgnoredDuringExecution:
                                items:
                                  properties:
                                    labelSelector:
                                      properties:
                                        matchExpressions:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    matchLabelKeys:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    mismatchLabelKeys:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    namespaceSelector:
                                      properties:
                                        matchExpressions:
                                          items:
                                            properties:
                                              key:
                                                type: string
                                              operator:
                                                type: string
                                              values:
                                                items:
                                                  type: string
                                                type: array
                                                x-kubernetes-list-type: atomic
                                            required:
                                            - key
                                            - operator
                                            type: object
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        matchLabels:
                                          additionalProperties:
                                            type: string
                                          type: object
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    namespaces:
                                      items:
                                        type: string
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    topologyKey:
                                      type: string
                                  required:
                                  - topologyKey
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                        type: object
                      extraAnnotations:
                        additionalProperties:
                          type: string
                        type: object
                      extraLabels:
                        additionalProperties:
                          type: string
                        type: object
                      gracefulShutdown:
                        properties:
                          enabled:
                            type: boolean
                          sleepTimeSeconds:
                            type: integer
                        type: object
                      imagePullSecrets:
                        items:
                          properties:
                            name:
                              default: ""
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        type: array
                      livenessProbe:
                        properties:
                          exec:
                            properties:
                              command:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          failureThreshold:
                            format: int32
                            type: integer
                          grpc:
                            properties:
                              port:
                                format: int32
                                type: integer
                              service:
                                default: ""
                                type: string
                            required:
                            - port
                            type: object
                          httpGet:
                            properties:
                              host:
                                type: string
                              httpHeaders:
                                items:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              path:
                                type: string
                              port:
                                anyOf:
                                - type: integer
                                - type: string
                                x-kubernetes-int-or-string: true
                              scheme:
                                type: string
                            required:
                            - port
                            type: object
                          initialDelaySeconds:
                            format: int32
                            type: integer
                          periodSeconds:
                            format: int32
                            type: integer
                          successThreshold:
                            format: int32
                            type: integer
                          tcpSocket:
                            properties:
                              host:
                                type: string
                              port:
                                anyOf:
                                - type: integer
                                - type: string
                                x-kubernetes-int-or-string: true
                            required:
                            - port
                            type: object
                          terminationGracePeriodSeconds:
                            format: int64
                            type: integer
                          timeoutSeconds:
                            format: int32
                            type: integer
                        type: object
                      nodeSelector:
                        additionalProperties:
                          type: string
                        type: object
                      readinessProbe:
                        properties:
                          exec:
                            properties:
                              command:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          failureThreshold:
                            format: int32
                            type: integer
                          grpc:
                            properties:
                              port:
                                format: int32
                                type: integer
                              service:
                                default: ""
                                type: string
                            required:
                            - port
                            type: object
                          httpGet:
                            properties:
                              host:
                                type: string
                              httpHeaders:
                                items:
                                  properties:
                                    name:
                                      type: string
                                    value:
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              path:
                                type: string
                              port:
                                anyOf:
                                - type: integer
                                - type: string
                                x-kubernetes-int-or-string: true
                              scheme:
                                type: string
                            required:
                            - port
                            type: object
                          initialDelaySeconds:
                            format: int32
                            type: integer
                          periodSeconds:
                            format: int32
                            type: integer
                          successThreshold:
                            format: int32
                            type: integer
                          tcpSocket:
                            properties:
                              host:
                                type: string
                              port:
                                anyOf:
                                - type: integer
                                - type: string
                                x-kubernetes-int-or-string: true
                            required:
                            - port
                            type: object
                          terminationGracePeriodSeconds:
                            format: int64
                            type: integer
                          timeoutSeconds:
                            format: int32
                            type: integer
                        type: object
                      securityContext:
                        properties:
                          appArmorProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          fsGroup:
                            format: int64
                            type: integer
                          fsGroupChangePolicy:
                            type: string
                          runAsGroup:
                            format: int64
                            type: integer
                          runAsNonRoot:
                            type: boolean
                          runAsUser:
                            format: int64
                            type: integer
                          seLinuxChangePolicy:
                            type: string
                          seLinuxOptions:
                            properties:
                              level:
                                type: string
                              role:
                                type: string
                              type:
                                type: string
                              user:
                                type: string
                            type: object
                          seccompProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          supplementalGroups:
                            items:
                              format: int64
                              type: integer
                            type: array
                            x-kubernetes-list-type: atomic
                          supplementalGroupsPolicy:
                            type: string
                          sysctls:
                            items:
                              properties:
                                name:
                                  type: string
                                value:
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            type: array
                            x-kubernetes-list-type: atomic
                          windowsOptions:
                            properties:
                              gmsaCredentialSpec:
                                type: string
                              gmsaCredentialSpecName:
                                type: string
                              hostProcess:
                                type: boolean
                              runAsUserName:
                                type: string
                            type: object
                        type: object
                      terminationGracePeriodSeconds:
                        type: integer
                      tolerations:
                        items:
                          properties:
                            effect:
                              type: string
                            key:
                              type: string
                            operator:
                              type: string
                            tolerationSeconds:
                              format: int64
                              type: integer
                            value:
                              type: string
                          type: object
                        type: array
                      topologySpreadConstraints:
                        items:
                          properties:
                            labelSelector:
                              properties:
                                matchExpressions:
                                  items:
                                    properties:
                                      key:
                                        type: string
                                      operator:
                                        type: string
                                      values:
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            matchLabelKeys:
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                            maxSkew:
                              format: int32
                              type: integer
                            minDomains:
                              format: int32
                              type: integer
                            nodeAffinityPolicy:
                              type: string
                            nodeTaintsPolicy:
                              type: string
                            topologyKey:
                              type: string
                            whenUnsatisfiable:
                              type: string
                          required:
                          - maxSkew
                          - topologyKey
                          - whenUnsatisfiable
                          type: object
                        type: array
                    type: object
                  sdsContainer:
                    properties:
                      bootstrap:
                        properties:
                          logLevel:
                            type: string
                        type: object
                      image:
                        properties:
                          digest:
                            type: string
                          pullPolicy:
                            type: string
                          registry:
                            type: string
                          repository:
                            type: string
                          tag:
                            type: string
                        type: object
                      resources:
                        properties:
                          claims:
                            items:
                              properties:
                                name:
                                  type: string
                                request:
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      securityContext:
                        properties:
                          allowPrivilegeEscalation:
                            type: boolean
                          appArmorProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          capabilities:
                            properties:
                              add:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                              drop:
                                items:
                                  type: string
                                type: array
                                x-kubernetes-list-type: atomic
                            type: object
                          privileged:
                            type: boolean
                          procMount:
                            type: string
                          readOnlyRootFilesystem:
                            type: boolean
                          runAsGroup:
                            format: int64
                            type: integer
                          runAsNonRoot:
                            type: boolean
                          runAsUser:
                            format: int64
                            type: integer
                          seLinuxOptions:
                            properties:
                              level:
                                type: string
                              role:
                                type: string
                              type:
                                type: string
                              user:
                                type: string
                            type: object
                          seccompProfile:
                            properties:
                              localhostProfile:
                                type: string
                              type:
                                type: string
                            required:
                            - type
                            type: object
                          windowsOptions:
                            properties:
                              gmsaCredentialSpec:
                                type: string
                              gmsaCredentialSpecName:
                                type: string
                              hostProcess:
                                type: boolean
                              runAsUserName:
                                type: string
                            type: object
                        type: object
                    type: object
                  service:
                    properties:
                      clusterIP:
                        type: string
                      externalTrafficPolicy:
                        type: string
                      extraAnnotations:
                        additionalProperties:
                          type: string
                        type: object
                      extraLabels:
                        additionalProperties:
                          type: string
                        type: object
                      ports:
                        items:
                          properties:
                            nodePort:
                              type: integer
                            port:
                              type: integer
                          required:
                          - port
                          type: object
                        type: array
                      type:
                        enum:
                        - ClusterIP
                        - NodePort
                        - LoadBalancer
                        - ExternalName
                        type: string
                    type: object
                  serviceAccount:
                    properties:
                      extraAnnotations:
                        additionalProperties:
                          type: string
                        type: object
                      extraLabels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  stats:
                    properties:
                      enableStatsRoute:
                        type: boolean
                      enabled:
                        type: boolean
                      routePrefixRewrite:
                        type: string
                      statsRoutePrefixRewrite:
                        type: string
                    type: object
                type: object
              selfManaged:
                type: object
                x-kubernetes-preserve-unknown-fields: true
            type: object
            x-kubernetes-validations:
            - message: exactly one of the fields in [kube selfManaged] must be set
              rule: '[has(self.kube),has(self.selfManaged)].filter(x,x==true).size()
                == 1'
          status:
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
    gateway.networking.k8s.io/policy: Direct
  name: httplistenerpolicies.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: HTTPListenerPolicy
    listKind: HTTPListenerPolicyList
    plural: httplistenerpolicies
    singular: httplistenerpolicy
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              acceptHttp10:
                type: boolean
              accessLog:
                items:
                  properties:
                    fileSink:
                      properties:
                        jsonFormat:
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                        path:
                          type: string
                        stringFormat:
                          type: string
                      required:
                      - path
                      type: object
                      x-kubernetes-validations:
                      - message: exactly one of the fields in [stringFormat jsonFormat]
                          must be set
                        rule: '[has(self.stringFormat),has(self.jsonFormat)].filter(x,x==true).size()
                          == 1'
                    filter:
                      allOf:
                      - maxProperties: 1
                        minProperties: 1
                      - maxProperties: 1
                        minProperties: 1
                      properties:
                        andFilter:
                          items:
                            maxProperties: 1
                            minProperties: 1
                            properties:
                              celFilter:
                                properties:
                                  match:
                                    type: string
                                required:
                                - match
                                type: object
                              durationFilter:
                                properties:
                                  op:
                                    enum:
                                    - EQ
                                    - GE
                                    - LE
                                    type: string
                                  value:
                                    format: int32
                                    maximum: 4294967295
                                    minimum: 0
                                    type: integer
                                required:
                                - op
                                type: object
                              grpcStatusFilter:
                                properties:
                                  exclude:
                                    type: boolean
                                  statuses:
                                    items:
                                      enum:
                                      - OK
                                      - CANCELED
                                      - UNKNOWN
                                      - INVALID_ARGUMENT
                                      - DEADLINE_EXCEEDED
                                      - NOT_FOUND
                                      - ALREADY_EXISTS
                                      - PERMISSION_DENIED
                                      - RESOURCE_EXHAUSTED
                                      - FAILED_PRECONDITION
                                      - ABORTED
                                      - OUT_OF_RANGE
                                      - UNIMPLEMENTED
                                      - INTERNAL
                                      - UNAVAILABLE
                                      - DATA_LOSS
                                      - UNAUTHENTICATED
                                      type: string
                                    minItems: 1
                                    type: array
                                type: object
                              headerFilter:
                                properties:
                                  header:
                                    properties:
                                      name:
                                        maxLength: 256
                                        minLength: 1
                                        pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                        type: string
                                      type:
                                        default: Exact
                                        enum:
                                        - Exact
                                        - RegularExpression
                                        type: string
                                      value:
                                        maxLength: 4096
                                        minLength: 1
                                        type: string
                                    required:
                                    - name
                                    - value
                                    type: object
                                required:
                                - header
                                type: object
                              notHealthCheckFilter:
                                type: boolean
                              responseFlagFilter:
                                properties:
                                  flags:
                                    items:
                                      type: string
                                    minItems: 1
                                    type: array
                                required:
                                - flags
                                type: object
                              statusCodeFilter:
                                properties:
                                  op:
                                    enum:
                                    - EQ
                                    - GE
                                    - LE
                                    type: string
                                  value:
                                    format: int32
                                    maximum: 4294967295
                                    minimum: 0
                                    type: integer
                                required:
                                - op
                                type: object
                              traceableFilter:
                                type: boolean
                            type: object
                          minItems: 2
                          type: array
                        celFilter:
                          properties:
                            match:
                              type: string
                          required:
                          - match
                          type: object
                        durationFilter:
                          properties:
                            op:
                              enum:
                              - EQ
                              - GE
                              - LE
                              type: string
                            value:
                              format: int32
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          required:
                          - op
                          type: object
                        grpcStatusFilter:
                          properties:
                            exclude:
                              type: boolean
                            statuses:
                              items:
                                enum:
                                - OK
                                - CANCELED
                                - UNKNOWN
                                - INVALID_ARGUMENT
                                - DEADLINE_EXCEEDED
                                - NOT_FOUND
                                - ALREADY_EXISTS
                                - PERMISSION_DENIED
                                - RESOURCE_EXHAUSTED
                                - FAILED_PRECONDITION
                                - ABORTED
                                - OUT_OF_RANGE
                                - UNIMPLEMENTED
                                - INTERNAL
                                - UNAVAILABLE
                                - DATA_LOSS
                                - UNAUTHENTICATED
                                type: string
                              minItems: 1
                              type: array
                          type: object
                        headerFilter:
                          properties:
                            header:
                              properties:
                                name:
                                  maxLength: 256
                                  minLength: 1
                                  pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                  type: string
                                type:
                                  default: Exact
                                  enum:
                                  - Exact
                                  - RegularExpression
                                  type: string
                                value:
                                  maxLength: 4096
                                  minLength: 1
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                          required:
                          - header
                          type: object
                        notHealthCheckFilter:
                          type: boolean
                        orFilter:
                          items:
                            maxProperties: 1
                            minProperties: 1
                            properties:
                              celFilter:
                                properties:
                                  match:
                                    type: string
                                required:
                                - match
                                type: object
                              durationFilter:
                                properties:
                                  op:
                                    enum:
                                    - EQ
                                    - GE
                                    - LE
                                    type: string
                                  value:
                                    format: int32
                                    maximum: 4294967295
                                    minimum: 0
                                    type: integer
                                required:
                                - op
                                type: object
                              grpcStatusFilter:
                                properties:
                                  exclude:
                                    type: boolean
                                  statuses:
                                    items:
                                      enum:
                                      - OK
                                      - CANCELED
                                      - UNKNOWN
                                      - INVALID_ARGUMENT
                                      - DEADLINE_EXCEEDED
                                      - NOT_FOUND
                                      - ALREADY_EXISTS
                                      - PERMISSION_DENIED
                                      - RESOURCE_EXHAUSTED
                                      - FAILED_PRECONDITION
                                      - ABORTED
                                      - OUT_OF_RANGE
                                      - UNIMPLEMENTED
                                      - INTERNAL
                                      - UNAVAILABLE
                                      - DATA_LOSS
                                      - UNAUTHENTICATED
                                      type: string
                                    minItems: 1
                                    type: array
                                type: object
                              headerFilter:
                                properties:
                                  header:
                                    properties:
                                      name:
                                        maxLength: 256
                                        minLength: 1
                                        pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                        type: string
                                      type:
                                        default: Exact
                                        enum:
                                        - Exact
                                        - RegularExpression
                                        type: string
                                      value:
                                        maxLength: 4096
                                        minLength: 1
                                        type: string
                                    required:
                                    - name
                                    - value
                                    type: object
                                required:
                                - header
                                type: object
                              notHealthCheckFilter:
                                type: boolean
                              responseFlagFilter:
                                properties:
                                  flags:
                                    items:
                                      type: string
                                    minItems: 1
                                    type: array
                                required:
                                - flags
                                type: object
                              statusCodeFilter:
                                properties:
                                  op:
                                    enum:
                                    - EQ
                                    - GE
                                    - LE
                                    type: string
                                  value:
                                    format: int32
                                    maximum: 4294967295
                                    minimum: 0
                                    type: integer
                                required:
                                - op
                                type: object
                              traceableFilter:
                                type: boolean
                            type: object
                          minItems: 2
                          type: array
                        responseFlagFilter:
                          properties:
                            flags:
                              items:
                                type: string
                              minItems: 1
                              type: array
                          required:
                          - flags
                          type: object
                        statusCodeFilter:
                          properties:
                            op:
                              enum:
                              - EQ
                              - GE
                              - LE
                              type: string
                            value:
                              format: int32
                              maximum: 4294967295
                              minimum: 0
                              type: integer
                          required:
                          - op
                          type: object
                        traceableFilter:
                          type: boolean
                      type: object
                    grpcService:
                      properties:
                        additionalRequestHeadersToLog:
                          items:
                            type: string
                          type: array
                        additionalResponseHeadersToLog:
                          items:
                            type: string
                          type: array
                        additionalResponseTrailersToLog:
                          items:
                            type: string
                          type: array
                        authority:
                          type: string
                        backendRef:
                          properties:
                            group:
                              default: ""
                              maxLength: 253
                              pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                              type: string
                            kind:
                              default: Service
                              maxLength: 63
                              minLength: 1
                              pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                              type: string
                            name:
                              maxLength: 253
                              minLength: 1
                              type: string
                            namespace:
                              maxLength: 63
                              minLength: 1
                              pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                              type: string
                            port:
                              format: int32
                              maximum: 65535
                              minimum: 1
                              type: integer
                            weight:
                              default: 1
                              format: int32
                              maximum: 1000000
                              minimum: 0
                              type: integer
                          required:
                          - name
                          type: object
                          x-kubernetes-validations:
                          - message: Must have port for Service reference
                            rule: '(size(self.group) == 0 && self.kind == ''Service'')
                              ? has(self.port) : true'
                        initialMetadata:
                          items:
                            properties:
                              key:
                                type: string
                              value:
                                type: string
                            required:
                            - key
                            type: object
                          type: array
                        logName:
                          type: string
                        maxReceiveMessageLength:
                          format: int32
                          type: integer
                        retryPolicy:
                          properties:
                            numRetries:
                              format: int32
                              type: integer
                            retryBackOff:
                              properties:
                                baseInterval:
                                  type: string
                                  x-kubernetes-validations:
                                  - message: invalid duration value
                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                maxInterval:
                                  type: string
                                  x-kubernetes-validations:
                                  - message: invalid duration value
                                    rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                              required:
                              - baseInterval
                              type: object
                          type: object
                        skipEnvoyHeaders:
                          type: boolean
                        timeout:
                          type: string
                          x-kubernetes-validations:
                          - message: invalid duration value
                            rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                      required:
                      - backendRef
                      - logName
                      type: object
                    openTelemetry:
                      properties:
                        attributes:
                          properties:
                            values:
                              items:
                                properties:
                                  key:
                                    type: string
                                  value:
                                    maxProperties: 1
                                    minProperties: 1
                                    properties:
                                      arrayValue:
                                        items:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        type: array
                                      kvListValue:
                                        type: object
                                        x-kubernetes-preserve-unknown-fields: true
                                      stringValue:
                                        type: string
                                    type: object
                                required:
                                - key
                                - value
                                type: object
                              type: array
                          type: object
                        body:
                          type: string
                        disableBuiltinLabels:
                          type: boolean
                        grpcService:
                          properties:
                            authority:
                              type: string
                            backendRef:
                              properties:
                                group:
                                  default: ""
                                  maxLength: 253
                                  pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                  type: string
                                kind:
                                  default: Service
                                  maxLength: 63
                                  minLength: 1
                                  pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                  type: string
                                name:
                                  maxLength: 253
                                  minLength: 1
                                  type: string
                                namespace:
                                  maxLength: 63
                                  minLength: 1
                                  pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                  type: string
                                port:
                                  format: int32
                                  maximum: 65535
                                  minimum: 1
                                  type: integer
                                weight:
                                  default: 1
                                  format: int32
                                  maximum: 1000000
                                  minimum: 0
                                  type: integer
                              required:
                              - name
                              type: object
                              x-kubernetes-validations:
                              - message: Must have port for Service reference
                                rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                  ? has(self.port) : true'
                            initialMetadata:
                              items:
                                properties:
                                  key:
                                    type: string
                                  value:
                                    type: string
                                required:
                                - key
                                type: object
                              type: array
                            logName:
                              type: string
                            maxReceiveMessageLength:
                              format: int32
                              type: integer
                            retryPolicy:
                              properties:
                                numRetries:
                                  format: int32
                                  type: integer
                                retryBackOff:
                                  properties:
                                    baseInterval:
                                      type: string
                                      x-kubernetes-validations:
                                      - message: invalid duration value
                                        rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                    maxInterval:
                                      type: string
                                      x-kubernetes-validations:
                                      - message: invalid duration value
                                        rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                  required:
                                  - baseInterval
                                  type: object
                              type: object
                            skipEnvoyHeaders:
                              type: boolean
                            timeout:
                              type: string
                              x-kubernetes-validations:
                              - message: invalid duration value
                                rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                          required:
                          - backendRef
                          - logName
                          type: object
                        resourceAttributes:
                          properties:
                            values:
                              items:
                                properties:
                                  key:
                                    type: string
                                  value:
                                    maxProperties: 1
                                    minProperties: 1
                                    properties:
                                      arrayValue:
                                        items:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        type: array
                                      kvListValue:
                                        type: object
                                        x-kubernetes-preserve-unknown-fields: true
                                      stringValue:
                                        type: string
                                    type: object
                                required:
                                - key
                                - value
                                type: object
                              type: array
                          type: object
                      required:
                      - grpcService
                      type: object
                  type: object
                maxItems: 16
                type: array
              defaultHostForHttp10:
                minLength: 1
                type: string
              healthCheck:
                properties:
                  path:
                    maxLength: 2048
                    pattern: ^/[-a-zA-Z0-9@:%.+~#?&/=_]+$
                    type: string
                required:
                - path
                type: object
              idleTimeout:
                type: string
                x-kubernetes-validations:
                - message: invalid duration value
                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
              preserveHttp1HeaderCase:
                type: boolean
              serverHeaderTransformation:
                enum:
                - Overwrite
                - AppendIfAbsent
                - PassThrough
                type: string
              streamIdleTimeout:
                type: string
                x-kubernetes-validations:
                - message: invalid duration value
                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
              targetRefs:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      maxLength: 253
                      minLength: 1
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-validations:
                - message: targetRefs may only reference Gateway resources
                  rule: self.all(r, r.kind == 'Gateway' && (!has(r.group) || r.group
                    == 'gateway.networking.k8s.io'))
              targetSelectors:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    matchLabels:
                      additionalProperties:
                        type: string
                      type: object
                  required:
                  - group
                  - kind
                  - matchLabels
                  type: object
                type: array
                x-kubernetes-validations:
                - message: targetSelectors may only reference Gateway resources
                  rule: self.all(r, r.kind == 'Gateway' && (!has(r.group) || r.group
                    == 'gateway.networking.k8s.io'))
              tracing:
                properties:
                  attributes:
                    items:
                      maxProperties: 2
                      minProperties: 1
                      properties:
                        environment:
                          properties:
                            defaultValue:
                              type: string
                            name:
                              type: string
                          required:
                          - name
                          type: object
                        literal:
                          properties:
                            value:
                              type: string
                          required:
                          - value
                          type: object
                        metadata:
                          properties:
                            defaultValue:
                              type: string
                            kind:
                              enum:
                              - Request
                              - Route
                              - Cluster
                              - Host
                              type: string
                            metadataKey:
                              properties:
                                key:
                                  type: string
                                path:
                                  items:
                                    properties:
                                      key:
                                        type: string
                                    required:
                                    - key
                                    type: object
                                  type: array
                              required:
                              - key
                              - path
                              type: object
                          required:
                          - kind
                          - metadataKey
                          type: object
                        name:
                          type: string
                        requestHeader:
                          properties:
                            defaultValue:
                              type: string
                            name:
                              type: string
                          required:
                          - name
                          type: object
                      required:
                      - name
                      type: object
                    type: array
                  clientSampling:
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  maxPathTagLength:
                    format: int32
                    type: integer
                  overallSampling:
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  provider:
                    maxProperties: 1
                    minProperties: 1
                    properties:
                      openTelemetry:
                        properties:
                          grpcService:
                            properties:
                              authority:
                                type: string
                              backendRef:
                                properties:
                                  group:
                                    default: ""
                                    maxLength: 253
                                    pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                    type: string
                                  kind:
                                    default: Service
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                    type: string
                                  name:
                                    maxLength: 253
                                    minLength: 1
                                    type: string
                                  namespace:
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  port:
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                  weight:
                                    default: 1
                                    format: int32
                                    maximum: 1000000
                                    minimum: 0
                                    type: integer
                                required:
                                - name
                                type: object
                                x-kubernetes-validations:
                                - message: Must have port for Service reference
                                  rule: '(size(self.group) == 0 && self.kind == ''Service'')
                                    ? has(self.port) : true'
                              initialMetadata:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    value:
                                      type: string
                                  required:
                                  - key
                                  type: object
                                type: array
                              maxReceiveMessageLength:
                                format: int32
                                type: integer
                              retryPolicy:
                                properties:
                                  numRetries:
                                    format: int32
                                    type: integer
                                  retryBackOff:
                                    properties:
                                      baseInterval:
                                        type: string
                                        x-kubernetes-validations:
                                        - message: invalid duration value
                                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                      maxInterval:
                                        type: string
                                        x-kubernetes-validations:
                                        - message: invalid duration value
                                          rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                                    required:
                                    - baseInterval
                                    type: object
                                type: object
                              skipEnvoyHeaders:
                                type: boolean
                              timeout:
                                type: string
                                x-kubernetes-validations:
                                - message: invalid duration value
                                  rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                            required:
                            - backendRef
                            type: object
                          resourceDetectors:
                            items:
                              maxProperties: 1
                              minProperties: 1
                              properties:
                                environmentResourceDetector:
                                  type: object
                              type: object
                            type: array
                          sampler:
                            maxProperties: 1
                            minProperties: 1
                            properties:
                              alwaysOnConfig:
                                type: object
                            type: object
                          serviceName:
                            type: string
                        required:
                        - grpcService
                        type: object
                    type: object
                  randomSampling:
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  spawnUpstreamSpan:
                    type: boolean
                  verbose:
                    type: boolean
                required:
                - provider
                type: object
              upgradeConfig:
                properties:
                  enabledUpgrades:
                    items:
                      type: string
                    minItems: 1
                    type: array
                type: object
              useRemoteAddress:
                type: boolean
              xffNumTrustedHops:
                format: int32
                minimum: 0
                type: integer
            type: object
          status:
            properties:
              ancestors:
                items:
                  properties:
                    ancestorRef:
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      items:
                        properties:
                          lastTransitionTime:
                            format: date-time
                            type: string
                          message:
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - controllerName
                  type: object
                maxItems: 16
                type: array
            required:
            - ancestors
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.1-0.20250625175829-8d11ce77f347
  labels:
    app: kgateway
    app.kubernetes.io/name: kgateway
    gateway.networking.k8s.io/policy: Direct
  name: trafficpolicies.gateway.kgateway.dev
spec:
  group: gateway.kgateway.dev
  names:
    categories:
    - kgateway
    kind: TrafficPolicy
    listKind: TrafficPolicyList
    plural: trafficpolicies
    singular: trafficpolicy
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              ai:
                properties:
                  defaults:
                    items:
                      properties:
                        field:
                          minLength: 1
                          type: string
                        override:
                          default: false
                          type: boolean
                        value:
                          minLength: 1
                          type: string
                      required:
                      - field
                      - value
                      type: object
                    type: array
                  promptEnrichment:
                    properties:
                      append:
                        items:
                          properties:
                            content:
                              type: string
                            role:
                              type: string
                          required:
                          - content
                          - role
                          type: object
                        type: array
                      prepend:
                        items:
                          properties:
                            content:
                              type: string
                            role:
                              type: string
                          required:
                          - content
                          - role
                          type: object
                        type: array
                    type: object
                  promptGuard:
                    properties:
                      request:
                        properties:
                          customResponse:
                            properties:
                              message:
                                default: The request was rejected due to inappropriate
                                  content
                                type: string
                              statusCode:
                                default: 403
                                format: int32
                                maximum: 599
                                minimum: 200
                                type: integer
                            type: object
                          moderation:
                            properties:
                              openAIModeration:
                                properties:
                                  authToken:
                                    properties:
                                      inline:
                                        type: string
                                      kind:
                                        enum:
                                        - Inline
                                        - SecretRef
                                        - Passthrough
                                        type: string
                                      secretRef:
                                        properties:
                                          name:
                                            default: ""
                                            type: string
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    required:
                                    - kind
                                    type: object
                                    x-kubernetes-validations:
                                    - message: at most one of the fields in [inline
                                        secretRef] may be set
                                      rule: '[has(self.inline),has(self.secretRef)].filter(x,x==true).size()
                                        <= 1'
                                  model:
                                    type: string
                                required:
                                - authToken
                                type: object
                            type: object
                          regex:
                            properties:
                              action:
                                default: MASK
                                type: string
                              builtins:
                                items:
                                  enum:
                                  - SSN
                                  - CREDIT_CARD
                                  - PHONE_NUMBER
                                  - EMAIL
                                  type: string
                                type: array
                              matches:
                                items:
                                  properties:
                                    name:
                                      type: string
                                    pattern:
                                      type: string
                                  type: object
                                type: array
                            type: object
                          webhook:
                            properties:
                              forwardHeaders:
                                items:
                                  properties:
                                    name:
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    type:
                                      default: Exact
                                      enum:
                                      - Exact
                                      - RegularExpression
                                      type: string
                                    value:
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                type: array
                              host:
                                properties:
                                  host:
                                    minLength: 1
                                    type: string
                                  port:
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - host
                                - port
                                type: object
                            required:
                            - host
                            type: object
                        type: object
                      response:
                        properties:
                          regex:
                            properties:
                              action:
                                default: MASK
                                type: string
                              builtins:
                                items:
                                  enum:
                                  - SSN
                                  - CREDIT_CARD
                                  - PHONE_NUMBER
                                  - EMAIL
                                  type: string
                                type: array
                              matches:
                                items:
                                  properties:
                                    name:
                                      type: string
                                    pattern:
                                      type: string
                                  type: object
                                type: array
                            type: object
                          webhook:
                            properties:
                              forwardHeaders:
                                items:
                                  properties:
                                    name:
                                      maxLength: 256
                                      minLength: 1
                                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                                      type: string
                                    type:
                                      default: Exact
                                      enum:
                                      - Exact
                                      - RegularExpression
                                      type: string
                                    value:
                                      maxLength: 4096
                                      minLength: 1
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                type: array
                              host:
                                properties:
                                  host:
                                    minLength: 1
                                    type: string
                                  port:
                                    format: int32
                                    maximum: 65535
                                    minimum: 1
                                    type: integer
                                required:
                                - host
                                - port
                                type: object
                            required:
                            - host
                            type: object
                        type: object
                    type: object
                  routeType:
                    default: CHAT
                    enum:
                    - CHAT
                    - CHAT_STREAMING
                    type: string
                type: object
              autoHostRewrite:
                type: boolean
              buffer:
                properties:
                  disable:
                    type: object
                  maxRequestSize:
                    anyOf:
                    - type: integer
                    - type: string
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                    x-kubernetes-validations:
                    - message: maxRequestSize must be greater than 0 and less than
                        4Gi
                      rule: (type(self) == int && int(self) > 0 && int(self) < 4294967296)
                        || (type(self) == string && quantity(self).isGreaterThan(quantity('0'))
                        && quantity(self).isLessThan(quantity('4Gi')))
                type: object
                x-kubernetes-validations:
                - message: exactly one of the fields in [maxRequestSize disable] must
                    be set
                  rule: '[has(self.maxRequestSize),has(self.disable)].filter(x,x==true).size()
                    == 1'
              cors:
                properties:
                  allowCredentials:
                    enum:
                    - true
                    type: boolean
                  allowHeaders:
                    items:
                      maxLength: 256
                      minLength: 1
                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                      type: string
                    maxItems: 64
                    type: array
                    x-kubernetes-list-type: set
                  allowMethods:
                    items:
                      enum:
                      - GET
                      - HEAD
                      - POST
                      - PUT
                      - DELETE
                      - CONNECT
                      - OPTIONS
                      - TRACE
                      - PATCH
                      - '*'
                      type: string
                    maxItems: 9
                    type: array
                    x-kubernetes-list-type: set
                    x-kubernetes-validations:
                    - message: AllowMethods cannot contain '*' alongside other methods
                      rule: '!(''*'' in self && self.size() > 1)'
                  allowOrigins:
                    items:
                      maxLength: 253
                      minLength: 1
                      pattern: ^(([^:/?#]+):)(//([^/?#]*))([^?#]*)(\?([^#]*))?(#(.*))?
                      type: string
                    maxItems: 64
                    type: array
                    x-kubernetes-list-type: set
                  disable:
                    type: object
                  exposeHeaders:
                    items:
                      maxLength: 256
                      minLength: 1
                      pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                      type: string
                    maxItems: 64
                    type: array
                    x-kubernetes-list-type: set
                  maxAge:
                    default: 5
                    format: int32
                    minimum: 1
                    type: integer
                type: object
                x-kubernetes-preserve-unknown-fields: true
              csrf:
                properties:
                  additionalOrigins:
                    items:
                      properties:
                        contains:
                          type: string
                        exact:
                          type: string
                        ignoreCase:
                          default: false
                          type: boolean
                        prefix:
                          type: string
                        safeRegex:
                          type: string
                        suffix:
                          type: string
                      required:
                      - ignoreCase
                      type: object
                      x-kubernetes-validations:
                      - message: exactly one of the fields in [exact prefix suffix
                          contains safeRegex] must be set
                        rule: '[has(self.exact),has(self.prefix),has(self.suffix),has(self.contains),has(self.safeRegex)].filter(x,x==true).size()
                          == 1'
                    maxItems: 16
                    type: array
                  percentageEnabled:
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                  percentageShadowed:
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                type: object
                x-kubernetes-validations:
                - message: at most one of the fields in [percentageEnabled percentageShadowed]
                    may be set
                  rule: '[has(self.percentageEnabled),has(self.percentageShadowed)].filter(x,x==true).size()
                    <= 1'
              extAuth:
                properties:
                  contextExtensions:
                    additionalProperties:
                      type: string
                    type: object
                  disable:
                    type: object
                  extensionRef:
                    properties:
                      name:
                        maxLength: 253
                        minLength: 1
                        type: string
                      namespace:
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                  withRequestBody:
                    properties:
                      allowPartialMessage:
                        type: boolean
                      maxRequestBytes:
                        format: int32
                        minimum: 1
                        type: integer
                      packAsBytes:
                        type: boolean
                    required:
                    - maxRequestBytes
                    type: object
                type: object
                x-kubernetes-validations:
                - message: exactly one of the fields in [extensionRef disable] must
                    be set
                  rule: '[has(self.extensionRef),has(self.disable)].filter(x,x==true).size()
                    == 1'
              extProc:
                properties:
                  disable:
                    type: object
                  extensionRef:
                    properties:
                      name:
                        maxLength: 253
                        minLength: 1
                        type: string
                      namespace:
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                  processingMode:
                    properties:
                      requestBodyMode:
                        default: NONE
                        enum:
                        - NONE
                        - STREAMED
                        - BUFFERED
                        - BUFFERED_PARTIAL
                        - FULL_DUPLEX_STREAMED
                        type: string
                      requestHeaderMode:
                        default: SEND
                        enum:
                        - DEFAULT
                        - SEND
                        - SKIP
                        type: string
                      requestTrailerMode:
                        default: SKIP
                        enum:
                        - DEFAULT
                        - SEND
                        - SKIP
                        type: string
                      responseBodyMode:
                        default: NONE
                        enum:
                        - NONE
                        - STREAMED
                        - BUFFERED
                        - BUFFERED_PARTIAL
                        - FULL_DUPLEX_STREAMED
                        type: string
                      responseHeaderMode:
                        default: SEND
                        enum:
                        - DEFAULT
                        - SEND
                        - SKIP
                        type: string
                      responseTrailerMode:
                        default: SKIP
                        enum:
                        - DEFAULT
                        - SEND
                        - SKIP
                        type: string
                    type: object
                type: object
                x-kubernetes-validations:
                - message: exactly one of the fields in [extensionRef disable] must
                    be set
                  rule: '[has(self.extensionRef),has(self.disable)].filter(x,x==true).size()
                    == 1'
              headerModifiers:
                properties:
                  request:
                    properties:
                      add:
                        items:
                          properties:
                            name:
                              maxLength: 256
                              minLength: 1
                              pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                            value:
                              maxLength: 4096
                              minLength: 1
                              type: string
                          required:
                          - name
                          - value
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                      remove:
                        items:
                          type: string
                        maxItems: 16
                        type: array
                        x-kubernetes-list-type: set
                      set:
                        items:
                          properties:
                            name:
                              maxLength: 256
                              minLength: 1
                              pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                            value:
                              maxLength: 4096
                              minLength: 1
                              type: string
                          required:
                          - name
                          - value
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                    type: object
                  response:
                    properties:
                      add:
                        items:
                          properties:
                            name:
                              maxLength: 256
                              minLength: 1
                              pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                            value:
                              maxLength: 4096
                              minLength: 1
                              type: string
                          required:
                          - name
                          - value
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                      remove:
                        items:
                          type: string
                        maxItems: 16
                        type: array
                        x-kubernetes-list-type: set
                      set:
                        items:
                          properties:
                            name:
                              maxLength: 256
                              minLength: 1
                              pattern: ^[A-Za-z0-9!#$%&'*+\-.^_\x60|~]+$
                              type: string
                            value:
                              maxLength: 4096
                              minLength: 1
                              type: string
                          required:
                          - name
                          - value
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                    type: object
                type: object
                x-kubernetes-validations:
                - message: At least one of request or response must be provided.
                  rule: has(self.request) || has(self.response)
              rateLimit:
                properties:
                  global:
                    properties:
                      descriptors:
                        items:
                          properties:
                            entries:
                              items:
                                properties:
                                  generic:
                                    properties:
                                      key:
                                        minLength: 1
                                        type: string
                                      value:
                                        minLength: 1
                                        type: string
                                    required:
                                    - key
                                    - value
                                    type: object
                                  header:
                                    minLength: 1
                                    type: string
                                  type:
                                    enum:
                                    - Generic
                                    - Header
                                    - RemoteAddress
                                    - Path
                                    type: string
                                required:
                                - type
                                type: object
                                x-kubernetes-validations:
                                - message: exactly one entry type must be specified
                                  rule: (has(self.type) && (self.type == 'Generic'
                                    && has(self.generic) && !has(self.header)) ||
                                    (self.type == 'Header' && has(self.header) &&
                                    !has(self.generic)) || (self.type == 'RemoteAddress'
                                    && !has(self.generic) && !has(self.header)) ||
                                    (self.type == 'Path' && !has(self.generic) &&
                                    !has(self.header)))
                              minItems: 1
                              type: array
                          required:
                          - entries
                          type: object
                        minItems: 1
                        type: array
                      extensionRef:
                        properties:
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - descriptors
                    - extensionRef
                    type: object
                  local:
                    properties:
                      tokenBucket:
                        properties:
                          fillInterval:
                            type: string
                            x-kubernetes-validations:
                            - message: invalid duration value
                              rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                          maxTokens:
                            format: int32
                            minimum: 1
                            type: integer
                          tokensPerFill:
                            default: 1
                            format: int32
                            minimum: 1
                            type: integer
                        required:
                        - fillInterval
                        - maxTokens
                        type: object
                    type: object
                type: object
              rbac:
                properties:
                  action:
                    default: Allow
                    enum:
                    - Allow
                    - Deny
                    type: string
                  policy:
                    properties:
                      matchExpressions:
                        items:
                          type: string
                        minItems: 1
                        type: array
                    type: object
                required:
                - policy
                type: object
              retry:
                properties:
                  attempts:
                    default: 1
                    format: int32
                    minimum: 0
                    type: integer
                  backoffBaseInterval:
                    default: 25ms
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                    - message: retry.backoffBaseInterval must be at least 1ms.
                      rule: duration(self) >= duration('1ms')
                  perTryTimeout:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                    - message: retry.perTryTimeout must be at least 1ms.
                      rule: duration(self) >= duration('1ms')
                  retryOn:
                    items:
                      enum:
                      - 5xx
                      - gateway-error
                      - reset
                      - reset-before-request
                      - connect-failure
                      - envoy-ratelimited
                      - retriable-4xx
                      - refused-stream
                      - retriable-status-codes
                      - http3-post-connect-failure
                      - cancelled
                      - deadline-exceeded
                      - internal
                      - resource-exhausted
                      - unavailable
                      type: string
                    minItems: 1
                    type: array
                  statusCodes:
                    items:
                      maximum: 599
                      minimum: 400
                      type: integer
                    minItems: 1
                    type: array
                type: object
                x-kubernetes-validations:
                - message: retryOn or statusCodes must be set.
                  rule: has(self.retryOn) || has(self.statusCodes)
              targetRefs:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      maxLength: 253
                      minLength: 1
                      type: string
                    sectionName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  type: object
                maxItems: 16
                minItems: 1
                type: array
                x-kubernetes-validations:
                - message: targetRefs may only reference Gateway, HTTPRoute, XListenerSet,
                    or Backend resources
                  rule: self.all(r, (r.kind == 'Backend' || r.kind == 'Gateway' ||
                    r.kind == 'HTTPRoute' || (r.kind == 'XListenerSet' && r.group
                    == 'gateway.networking.x-k8s.io')) && (!has(r.group) || r.group
                    == 'gateway.networking.k8s.io' || r.group == 'gateway.networking.x-k8s.io'
                    || r.group == 'gateway.kgateway.dev' ))
              targetSelectors:
                items:
                  properties:
                    group:
                      maxLength: 253
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    matchLabels:
                      additionalProperties:
                        type: string
                      type: object
                    sectionName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                  required:
                  - group
                  - kind
                  - matchLabels
                  type: object
                type: array
                x-kubernetes-validations:
                - message: targetSelectors may only reference Gateway, HTTPRoute,
                    or XListenerSet resources
                  rule: self.all(r, (r.kind == 'Gateway' || r.kind == 'HTTPRoute'
                    || (r.kind == 'XListenerSet' && r.group == 'gateway.networking.x-k8s.io'))
                    && (!has(r.group) || r.group == 'gateway.networking.k8s.io' ||
                    r.group == 'gateway.networking.x-k8s.io'))
              timeouts:
                properties:
                  request:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                  streamIdle:
                    type: string
                    x-kubernetes-validations:
                    - message: invalid duration value
                      rule: matches(self, '^([0-9]{1,5}(h|m|s|ms)){1,4}$')
                type: object
              transformation:
                properties:
                  request:
                    properties:
                      add:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                          required:
                          - name
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                      body:
                        properties:
                          parseAs:
                            default: AsString
                            enum:
                            - AsString
                            - AsJson
                            type: string
                          value:
                            type: string
                        required:
                        - parseAs
                        type: object
                      remove:
                        items:
                          type: string
                        maxItems: 16
                        type: array
                        x-kubernetes-list-type: set
                      set:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                          required:
                          - name
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                    type: object
                  response:
                    properties:
                      add:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                          required:
                          - name
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                      body:
                        properties:
                          parseAs:
                            default: AsString
                            enum:
                            - AsString
                            - AsJson
                            type: string
                          value:
                            type: string
                        required:
                        - parseAs
                        type: object
                      remove:
                        items:
                          type: string
                        maxItems: 16
                        type: array
                        x-kubernetes-list-type: set
                      set:
                        items:
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                          required:
                          - name
                          type: object
                        maxItems: 16
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                    type: object
                type: object
            type: object
            x-kubernetes-validations:
            - message: autoHostRewrite can only be used when targeting HTTPRoute resources
              rule: '!has(self.autoHostRewrite) || ((has(self.targetRefs) && self.targetRefs.all(r,
                r.kind == ''HTTPRoute'')) || (has(self.targetSelectors) && self.targetSelectors.all(r,
                r.kind == ''HTTPRoute'')))'
            - message: retry.perTryTimeout must be lesser than timeouts.request
              rule: 'has(self.retry) && has(self.timeouts) ? (has(self.retry.perTryTimeout)
                && has(self.timeouts.request) ? duration(self.retry.perTryTimeout)
                < duration(self.timeouts.request) : true) : true'
            - message: targetRefs[].sectionName must be set when targeting Gateway
                resources with retry policy
              rule: 'has(self.retry) && has(self.targetRefs) ? self.targetRefs.all(r,
                (r.kind == ''Gateway'' ? has(r.sectionName) : true )) : true'
            - message: targetSelectors[].sectionName must be set when targeting Gateway
                resources with retry policy
              rule: 'has(self.retry) && has(self.targetSelectors) ? self.targetSelectors.all(r,
                (r.kind == ''Gateway'' ? has(r.sectionName) : true )) : true'
          status:
            properties:
              ancestors:
                items:
                  properties:
                    ancestorRef:
                      properties:
                        group:
                          default: gateway.networking.k8s.io
                          maxLength: 253
                          pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                        kind:
                          default: Gateway
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                          type: string
                        name:
                          maxLength: 253
                          minLength: 1
                          type: string
                        namespace:
                          maxLength: 63
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                          type: string
                        port:
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                        sectionName:
                          maxLength: 253
                          minLength: 1
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - name
                      type: object
                    conditions:
                      items:
                        properties:
                          lastTransitionTime:
                            format: date-time
                            type: string
                          message:
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - ancestorRef
                  - controllerName
                  type: object
                maxItems: 16
                type: array
            required:
            - ancestors
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
